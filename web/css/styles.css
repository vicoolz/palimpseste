/* 📦 Import des fichiers modulaires */
@import 'variables.css';
@import 'base.css';

/* Variables legacy (pour rétrocompatibilité, seront supprimées progressivement) */
:root {
--bg: #0d0d0d;
--bg-card: #161618;
--bg-elevated: #1e1e21;
--text: #e8e6e3;
--text-secondary: #9d9a95;
--muted: #5c5a56;
--accent: #e63946;
--accent-secondary: #f4a261;
--accent-tertiary: #2a9d8f;
--accent-purple: #9b5de5;
--border: #2a2a2d;
--glow: 0 0 60px rgba(230,57,70,0.1);
/* Pixel Art Colors */
--pixel-shadow: #0a0a0a;
--pixel-highlight: #3a3a3d;
}

/* ═══════════════════════════════════════════════════════════════════════════
   🎮 PIXEL ART DESIGN SYSTEM
   ═══════════════════════════════════════════════════════════════════════════ */

/* Police pixel pour les titres */
@font-face {
    font-family: 'Pixel';
    src: local('Courier New'), local('Consolas'), local('monospace');
}

/* ═══════════════════════════════════════════════════════════════════════════
   📱 MOBILE FIRST - Style Twitter-like (< 900px)
   ═══════════════════════════════════════════════════════════════════════════ */

/* ====== MOBILE DRAWER OVERLAY ====== */
.mobile-drawer-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    z-index: 199;
    opacity: 0;
    transition: opacity 0.3s ease;
}
.mobile-drawer-overlay.open {
    opacity: 1;
}

/* ====== MOBILE BOTTOM NAVIGATION (style Twitter) ====== */
.mobile-bottom-nav {
    display: none;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: var(--bg-card);
    border-top: 2px solid var(--border);
    padding: 0.5rem 0;
    padding-bottom: calc(0.5rem + env(safe-area-inset-bottom, 0px));
    z-index: 200;
    justify-content: space-around;
    /* Pixel art border effect */
    box-shadow: 
        0 -4px 0 var(--pixel-shadow),
        inset 0 2px 0 var(--pixel-highlight);
}

.mobile-nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.2rem;
    padding: 0.5rem 1rem;
    background: none;
    border: none;
    color: var(--muted);
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
    min-width: 60px;
}

.mobile-nav-item.active {
    color: var(--accent);
}

.mobile-nav-item.active::before {
    content: '';
    position: absolute;
    top: -0.5rem;
    left: 50%;
    transform: translateX(-50%);
    width: 4px;
    height: 4px;
    background: var(--accent);
    /* Pixel dot */
    box-shadow: 
        4px 0 0 var(--accent),
        -4px 0 0 var(--accent);
}

.mobile-nav-icon {
    font-size: 1.4rem;
}

.mobile-nav-label {
    font-size: 0.6rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.mobile-nav-badge {
    position: absolute;
    top: 0.2rem;
    right: 0.8rem;
    min-width: 16px;
    height: 16px;
    background: var(--accent);
    color: white;
    font-size: 0.6rem;
    font-weight: 700;
    border-radius: 8px;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 0 4px;
    /* Pixel border */
    box-shadow: 0 2px 0 var(--pixel-shadow);
}

.mobile-nav-badge:not(:empty) {
    display: flex;
}

/* ====== MOBILE PROFILE BUTTON (Header) ====== */
.mobile-profile-btn {
    display: none;
    background: none;
    border: none;
    padding: 4px;
    cursor: pointer;
    flex-shrink: 0;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
    z-index: 10;
}

/* Mobile logo */
.mobile-logo {
    display: none;
    font-size: 1.25rem;
    flex-shrink: 0;
}

.mobile-profile-avatar {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent), var(--accent-purple));
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.1rem;
    color: white;
    /* Pixel border effect */
    border: 2px solid var(--border);
    box-shadow: 2px 2px 0 var(--pixel-shadow);
    transition: all 0.2s;
}

.mobile-profile-btn:active .mobile-profile-avatar {
    transform: scale(0.92);
    box-shadow: 1px 1px 0 var(--pixel-shadow);
}

/* ====== DRAWER CLOSE BUTTON ====== */
.drawer-close-btn {
    display: none;
    position: absolute;
    top: 0.75rem;
    right: 0.75rem;
    width: 36px;
    height: 36px;
    background: var(--bg-elevated);
    border: 2px solid var(--border);
    border-radius: 50%;
    color: var(--text);
    font-size: 1rem;
    cursor: pointer;
    z-index: 20;
    box-shadow: 2px 2px 0 var(--pixel-shadow);
    transition: all 0.15s;
}

.drawer-close-btn:active {
    transform: scale(0.95);
    box-shadow: 0 0 0 var(--pixel-shadow);
}

/* ====== DRAWER QUICK ACTIONS ====== */
.drawer-quick-actions {
    display: none;
    flex-direction: column;
    gap: 0.5rem;
    padding: 0.75rem;
    margin: -0.5rem -0.25rem 0.75rem;
    background: var(--bg-elevated);
    border-radius: 8px;
    border: 2px solid var(--border);
    box-shadow: 3px 3px 0 var(--pixel-shadow);
}

.drawer-action-btn {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.6rem 0.75rem;
    background: var(--bg-card);
    border: 2px solid var(--border);
    border-radius: 0;
    color: var(--text);
    font-size: 0.85rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.15s;
    box-shadow: 2px 2px 0 var(--pixel-shadow);
}

.drawer-action-btn:active {
    transform: translate(2px, 2px);
    box-shadow: 0 0 0 var(--pixel-shadow);
}

.drawer-action-btn span {
    font-size: 1.1rem;
}

.drawer-lang-selector {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.5rem 0.75rem;
    background: var(--bg-card);
    border: 2px solid var(--border);
    box-shadow: 2px 2px 0 var(--pixel-shadow);
}

.drawer-lang-selector span {
    font-size: 1.1rem;
}

.drawer-lang-selector select {
    flex: 1;
    background: transparent;
    border: none;
    color: var(--text);
    font-size: 0.85rem;
    cursor: pointer;
    outline: none;
}

.drawer-lang-selector select option {
    background: var(--bg-card);
    color: var(--text);
}

/* ====== DESKTOP MEDIA QUERY (> 900px) ====== */
@media screen and (min-width: 901px) {
    /* Header desktop sur une seule ligne */
    header {
        left: 260px !important;
        right: 0 !important;
    }
    
    .header-inner {
        display: flex !important;
        align-items: center !important;
        gap: 0.75rem !important;
        flex-wrap: nowrap !important;
        overflow-x: auto !important;
    }
    
    .header-title {
        display: block !important;
        flex-shrink: 0 !important;
        max-width: 200px !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
    }
    
    .search-container {
        flex: 1 !important;
        min-width: 150px !important;
        max-width: 300px !important;
    }
    
    .header-actions {
        display: flex !important;
        flex-wrap: nowrap !important;
        gap: 0.35rem !important;
        flex-shrink: 0 !important;
    }
    
    .header-btn {
        display: inline-flex !important;
        padding: 0.3rem 0.5rem !important;
        font-size: 0.65rem !important;
        white-space: nowrap !important;
    }
    
    .notif-btn,
    .user-menu,
    .lang-selector {
        display: flex !important;
        flex-shrink: 0 !important;
    }
    
    /* Masquer éléments mobile sur desktop */
    .mobile-profile-btn,
    .mobile-logo,
    .mobile-bottom-nav,
    .mobile-drawer-overlay {
        display: none !important;
    }
}

/* ====== MOBILE MEDIA QUERIES ====== */
@media screen and (max-width: 900px) {
    /* === MOBILE: Tout le drawer est géré par mobile.css === */
    /* Ne pas définir de styles pour .stats-panel ici ! */
    
    /* Afficher les éléments mobile basiques */
    .mobile-bottom-nav {
        display: flex !important;
    }
    
    .mobile-profile-btn {
        display: flex !important;
    }
    
    .mobile-logo {
        display: block !important;
    }
    
    .mobile-drawer-overlay {
        display: block !important;
    }

    /* ═══════════════════════════════════════════════════════════════
       HEADER MOBILE - Simple et ergonomique
       Layout: [Avatar profil] [Logo] [Recherche]
       ═══════════════════════════════════════════════════════════════ */
    
    header {
        left: 0 !important;
        right: 0 !important;
        width: 100% !important;
        max-width: 100vw !important;
        border-bottom: 2px solid var(--border) !important;
        box-shadow: 0 4px 0 var(--pixel-shadow) !important;
    }
    
    .header-inner {
        width: 100% !important;
        padding: 0.5rem 0.75rem !important;
        display: flex !important;
        flex-wrap: nowrap !important;
        align-items: center !important;
        gap: 0.75rem !important;
        justify-content: flex-start !important;
    }
    
    /* MASQUER les éléments desktop sur mobile */
    .header-actions,
    .lang-selector,
    .user-menu,
    .notif-btn,
    .favorites-btn,
    .header-title {
        display: none !important;
    }
    
    /* Avatar profil - ORDRE 1 - à gauche, bien visible */
    .mobile-profile-btn {
        display: flex !important;
        order: 1 !important;
        flex-shrink: 0 !important;
        width: 42px !important;
        height: 42px !important;
        padding: 0 !important;
        background: none !important;
        border: none !important;
    }
    
    .mobile-profile-avatar {
        width: 42px !important;
        height: 42px !important;
        font-size: 1.3rem !important;
    }
    
    /* Logo - ORDRE 2 - compact */
    .mobile-logo {
        display: flex !important;
        order: 2 !important;
        flex-shrink: 0 !important;
        font-size: 1.5rem !important;
    }
    
    /* Recherche - ORDRE 3 - prend tout l'espace restant */
    .search-container {
        order: 3 !important;
        flex: 1 !important;
        min-width: 0 !important;
        max-width: none !important;
        margin: 0 !important;
    }
    
    .search-input {
        width: 100% !important;
        font-size: 16px !important;
        padding: 0.5rem 0.75rem 0.5rem 2.25rem !important;
        border-radius: 20px !important;
        border: 2px solid var(--border) !important;
        box-shadow: 2px 2px 0 var(--pixel-shadow) !important;
    }
    
    .search-input:focus {
        box-shadow: 2px 2px 0 var(--accent) !important;
    }
    
    /* CONTENU PRINCIPAL */
    main {
        margin-left: 0 !important;
        margin-right: 0 !important;
        padding-left: 0.75rem !important;
        padding-right: 0.75rem !important;
        padding-top: 7rem !important;
        padding-bottom: 5rem !important;
        width: 100% !important;
        max-width: 100% !important;
    }
    
    /* Exploration container */
    .exploration-container {
        margin-left: 0 !important;
        position: sticky !important;
        top: 56px !important;
        z-index: 90 !important;
        /* Pixel border */
        border-bottom: 2px solid var(--border) !important;
        box-shadow: 0 4px 0 var(--pixel-shadow) !important;
    }
    
    .exploration-tabs {
        padding: 0 0.5rem !important;
        overflow-x: auto !important;
        -webkit-overflow-scrolling: touch !important;
        scrollbar-width: none !important;
    }
    
    .exploration-tabs::-webkit-scrollbar {
        display: none;
    }
    
    .exploration-tab {
        padding: 0.5rem 0.75rem !important;
        font-size: 0.7rem !important;
        white-space: nowrap !important;
    }
    
    .ambiance-bar {
        padding: 0.5rem !important;
    }
    
    .ambiance-pill {
        padding: 0.4rem 0.75rem !important;
        font-size: 0.7rem !important;
        /* Pixel style */
        border-radius: 4px !important;
        border: 2px solid var(--border) !important;
        box-shadow: 2px 2px 0 var(--pixel-shadow) !important;
    }
    
    .ambiance-pill.active {
        box-shadow: 2px 2px 0 var(--accent) !important;
    }
    
    /* CARDS */
    .card {
        border-radius: 0 !important;
        margin-bottom: 1.5rem !important;
        /* Pixel art style */
        border: 2px solid var(--border) !important;
        box-shadow: 4px 4px 0 var(--pixel-shadow) !important;
    }
    
    .card:hover {
        box-shadow: 6px 6px 0 var(--pixel-shadow) !important;
    }
    
    .card::before {
        width: 3px !important;
    }
    
    .card-head {
        padding: 1rem 1rem 0.5rem !important;
    }
    
    .card-body {
        padding: 0.75rem 1rem !important;
        font-size: 0.95rem !important;
        line-height: 1.7 !important;
    }
    
    .card-foot {
        padding: 0.75rem 1rem !important;
    }
    
    /* Actions des cartes sur mobile - en grille 2x2 puis wrap */
    .card-foot .actions {
        display: grid !important;
        grid-template-columns: repeat(auto-fit, minmax(80px, 1fr)) !important;
        gap: 0.5rem !important;
        width: 100% !important;
    }
    
    .card-foot .actions .btn {
        width: 100% !important;
        justify-content: center !important;
        padding: 0.6rem 0.5rem !important;
        font-size: 0.7rem !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
    }
    
    /* Like button plus visible */
    .card-foot .actions .btn:first-child {
        background: rgba(230, 57, 70, 0.1) !important;
        border-color: var(--accent) !important;
        color: var(--accent) !important;
        font-size: 1.1rem !important;
    }
    
    .card-foot .actions .btn:first-child.active {
        background: var(--accent) !important;
        color: white !important;
    }
    
    /* Masquer les mots-clés sur mobile (trop encombrant) */
    .card-keywords {
        display: none !important;
    }
    
    /* Masquer le texte des boutons sur mobile - icônes seulement */
    .btn .btn-text {
        display: none !important;
    }
    
    /* Boutons pixel style */
    .btn, .btn-suite {
        border-radius: 0 !important;
        border: 2px solid var(--border) !important;
        box-shadow: 2px 2px 0 var(--pixel-shadow) !important;
    }
    
    .btn:active, .btn-suite:active {
        box-shadow: 0 0 0 var(--pixel-shadow) !important;
        transform: translate(2px, 2px) !important;
    }
    
    /* Bannière reco */
    .reco-banner {
        margin-left: 0 !important;
        margin-right: 0 !important;
        max-width: 100% !important;
        width: 100% !important;
        padding: 1rem !important;
        border-radius: 0 !important;
        border: 2px solid var(--border) !important;
        box-shadow: 4px 4px 0 var(--pixel-shadow) !important;
    }
    
    /* Body */
    html, body {
        overflow-x: hidden !important;
        max-width: 100vw !important;
    }
    
    /* Ambiance intro */
    .ambiance-intro {
        margin-left: 0 !important;
        top: 92px !important;
        padding: 0.75rem 1rem !important;
    }
    
    .ambiance-intro h2 {
        font-size: 1.1rem !important;
    }
    
    .ambiance-intro p {
        font-size: 0.8rem !important;
    }
    
    /* Progress bar */
    .progress {
        left: 0 !important;
    }
}

/* SMARTPHONES - ENCORE PLUS COMPACT */
@media screen and (max-width: 500px) {
    .mobile-nav-item {
        padding: 0.4rem 0.5rem !important;
        min-width: 50px !important;
    }
    
    .mobile-nav-icon {
        font-size: 1.2rem !important;
    }
    
    .mobile-nav-label {
        font-size: 0.55rem !important;
    }
    
    .mobile-profile-avatar {
        width: 28px !important;
        height: 28px !important;
        font-size: 0.85rem !important;
    }
    
    .header-inner::after {
        font-size: 1rem !important;
    }
    
    .search-input {
        padding: 0.4rem 0.6rem 0.4rem 1.75rem !important;
    }
    
    main {
        padding: 4rem 0.5rem 4.5rem 0.5rem !important;
    }
    
    .card-body {
        font-size: 0.9rem !important;
    }
    
    .exploration-tab {
        padding: 0.4rem 0.6rem !important;
        font-size: 0.65rem !important;
    }
    
    .ambiance-pill {
        padding: 0.35rem 0.6rem !important;
        font-size: 0.65rem !important;
    }
    
    .ambiance-pill .ambiance-name {
        display: none !important;
    }
    
    .ambiance-pill .ambiance-icon {
        font-size: 1.1rem !important;
    }
    
    /* Overlays et modales plein écran sur mobile */
    .favorites-overlay,
    .search-results-overlay,
    .reader-overlay {
        padding-bottom: 60px !important; /* Espace pour la nav bottom */
    }
    
    .favorites-view {
        padding: 1rem !important;
        padding-bottom: 80px !important;
    }
    
    .favorites-header {
        padding: 0.75rem 0 !important;
        margin-bottom: 1rem !important;
    }
    
    .favorites-title {
        font-size: 0.7rem !important;
    }
    
    /* Feed social mobile */
    .feed-tabs {
        flex-wrap: nowrap !important;
        overflow-x: auto !important;
        padding-bottom: 0.5rem !important;
        scrollbar-width: none !important;
    }
    
    .feed-tabs::-webkit-scrollbar {
        display: none;
    }
    
    .feed-tab {
        white-space: nowrap !important;
        flex-shrink: 0 !important;
        padding: 0.4rem 0.6rem !important;
        font-size: 0.7rem !important;
    }
    
    /* Auth modal mobile */
    .auth-modal {
        align-items: flex-start !important;
        padding-top: 2rem !important;
    }
    
    .auth-box {
        width: 95% !important;
        max-width: 400px !important;
        border-radius: 0 !important;
        border: 2px solid var(--border) !important;
        box-shadow: 4px 4px 0 var(--pixel-shadow) !important;
    }
    
    /* Messages modal mobile */
    .messages-modal {
        flex-direction: column !important;
    }
    
    .messages-sidebar {
        width: 100% !important;
        max-height: 40vh !important;
        border-right: none !important;
        border-bottom: 2px solid var(--border) !important;
    }
    
    .messages-main {
        flex: 1 !important;
        min-height: 50vh !important;
    }
    
    /* Profile modal mobile */
    .user-profile-content {
        width: 100% !important;
        max-width: 100% !important;
        height: 100% !important;
        border-radius: 0 !important;
    }
    
    /* Feed loading centré sur mobile */
    .feed-loading {
        padding: 3rem 1rem !important;
        margin: 0 auto !important;
        width: 100% !important;
        text-align: center !important;
    }
    
    .feed-loading span {
        display: block !important;
        word-wrap: break-word !important;
    }
    
    /* Toast sur mobile */
    .toast {
        left: 1rem !important;
        right: 1rem !important;
        bottom: 80px !important;
        transform: translateX(0) translateY(100px) !important;
        max-width: none !important;
    }
    
    .toast.show {
        transform: translateX(0) translateY(0) !important;
    }
}

/* ═══════════════════════════════════════════════════════════════════════════ */

/* 🔄 Reset et body importés depuis base.css */

/* Stats Panel - Style épuré + pixel touches */
.stats-panel {
position: fixed;
left: 0;
top: 0;
bottom: 0;
width: 260px;
background: linear-gradient(180deg, var(--bg-card) 0%, var(--bg) 100%);
border-right: 2px solid var(--border);
padding: 1.5rem 1.25rem;
overflow-y: auto;
z-index: 50;
display: flex;
flex-direction: column;
gap: 1.5rem;
/* Pixel shadow effect */
box-shadow: 4px 0 0 var(--pixel-shadow);
}
.stats-logo {
font-size: 0.75rem;
font-weight: 700;
letter-spacing: 0.25em;
color: var(--text);
text-transform: uppercase;
padding-bottom: 1rem;
border-bottom: 2px solid var(--border);
/* Pixel text effect */
text-shadow: 1px 1px 0 var(--pixel-shadow);
}
.stats-section h3 {
font-size: 0.65rem;
font-weight: 600;
letter-spacing: 0.1em;
text-transform: uppercase;
color: var(--muted);
margin-bottom: 0.75rem;
}
.big-number {
font-size: 3rem;
font-weight: 700;
background: linear-gradient(135deg, var(--text), var(--text-secondary));
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
line-height: 1;
}
.big-number-label {
font-size: 0.75rem;
color: var(--muted);
margin-top: 0.25rem;
}
.mini-stats {
display: grid;
grid-template-columns: 1fr 1fr;
gap: 0.75rem;
margin-top: 0.75rem;
}
.mini-stat {
background: var(--bg-elevated);
padding: 0.75rem;
border-radius: 8px;
border: 1px solid var(--border);
}
.mini-stat-value {
font-size: 1.4rem;
font-weight: 600;
color: var(--text);
}
.mini-stat-label {
font-size: 0.7rem;
color: var(--muted);
margin-top: 0.2rem;
}

/* Author bars */
.author-bars {
display: flex;
flex-direction: column;
gap: 0.75rem;
}
.author-bar {
display: flex;
align-items: center;
gap: 0.75rem;
}
.author-bar-name {
font-size: 0.75rem;
color: var(--text-secondary);
width: 100px;
flex-shrink: 0;
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
}
.author-bar-track {
flex: 1;
height: 6px;
background: var(--bg);
border-radius: 3px;
overflow: hidden;
}
.author-bar-fill {
height: 100%;
border-radius: 3px;
transition: width 0.5s ease;
}
.author-bar-count {
font-size: 0.7rem;
color: var(--muted);
width: 24px;
text-align: right;
}

/* Genre pills */
.genre-chart {
display: flex;
flex-wrap: wrap;
gap: 0.5rem;
margin-top: 0.5rem;
}
.genre-pill {
display: flex;
align-items: center;
gap: 0.4rem;
padding: 0.4rem 0.75rem;
background: var(--bg-elevated);
border-radius: 100px;
border: 1px solid var(--border);
font-size: 0.7rem;
color: var(--text-secondary);
}
.genre-dot {
width: 8px;
height: 8px;
border-radius: 50%;
}

/* Connexions */
.connections-section { margin-top: 0.5rem; }
.connections-hint {
font-size: 0.7rem;
color: var(--muted);
margin-bottom: 0.75rem;
}
.connection-graph {
display: flex;
flex-direction: column;
gap: 0.5rem;
}
.connection-item {
background: var(--bg-elevated);
border: 1px solid var(--border);
border-radius: 8px;
padding: 0.6rem 0.75rem;
cursor: pointer;
transition: all 0.2s;
}
.connection-item:hover {
border-color: var(--accent);
transform: translateX(3px);
}
.connection-node {
display: flex;
align-items: center;
gap: 0.5rem;
font-size: 0.75rem;
color: var(--text);
}
.connection-node.discovered {
color: var(--accent-tertiary);
}
.connection-dot {
width: 6px;
height: 6px;
border-radius: 50%;
background: var(--accent);
flex-shrink: 0;
}
.connection-node.discovered .connection-dot {
background: var(--accent-tertiary);
}
.connection-label {
font-size: 0.6rem;
color: var(--muted);
margin-top: 0.3rem;
margin-left: 1rem;
}

/* Fun stats */
.fun-stat {
margin-top: 1rem;
padding: 0.75rem;
background: linear-gradient(135deg, rgba(255,159,10,0.1), rgba(191,90,242,0.1));
border-radius: 8px;
font-size: 0.75rem;
color: var(--text-secondary);
text-align: center;
line-height: 1.4;
}
.fun-stat strong { color: var(--accent-secondary); }

/* Section Favoris */
.favorites-section {
max-height: 280px;
overflow-y: auto;
}
.favorite-item {
display: flex;
align-items: flex-start;
gap: 0.5rem;
padding: 0.5rem 0.6rem;
background: transparent;
border-left: 2px solid var(--accent);
margin-bottom: 0.6rem;
cursor: pointer;
transition: all 0.2s;
}
.favorite-item:hover {
background: var(--bg-elevated);
padding-left: 0.8rem;
}
.favorite-content {
flex: 1;
min-width: 0;
}
.favorite-title {
font-size: 0.7rem;
font-weight: 600;
color: var(--text);
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
}
.favorite-author {
font-size: 0.6rem;
color: var(--muted);
text-transform: uppercase;
letter-spacing: 0.05em;
}
.favorite-preview {
display: none; /* Simplifié */
}
.favorite-remove {
background: none;
border: none;
color: var(--muted);
cursor: pointer;
padding: 0.2rem;
font-size: 0.7rem;
opacity: 0;
transition: all 0.2s;
}
.favorite-item:hover .favorite-remove {
opacity: 1;
}
.favorite-remove:hover {
color: var(--accent);
}
.favorites-empty {
font-size: 0.75rem;
color: var(--muted);
text-align: center;
padding: 1rem;
font-style: italic;
}
.source-badge {
font-size: 0.55rem;
padding: 0.15rem 0.4rem;
border-radius: 3px;
background: rgba(191,90,242,0.2);
color: var(--accent-purple);
margin-left: 0.3rem;
}

/* Achievements */
.achievements {
display: flex;
flex-wrap: wrap;
gap: 0.5rem;
}
.achievement {
padding: 0.4rem 0.6rem;
background: var(--bg-elevated);
border: 1px solid var(--border);
border-radius: 6px;
font-size: 0.75rem;
display: flex;
align-items: center;
gap: 0.3rem;
opacity: 0.4;
transition: all 0.3s;
cursor: help;
}
.achievement.unlocked {
opacity: 1;
border-color: var(--accent-secondary);
background: rgba(255,159,10,0.1);
}
.achievement:hover {
transform: scale(1.05);
}
.achievement-icon { font-size: 1rem; }

/* Path visualization */
.reading-path {
display: flex;
align-items: center;
gap: 0.3rem;
flex-wrap: wrap;
margin-top: 0.5rem;
font-size: 0.65rem;
}
.path-node {
padding: 0.2rem 0.4rem;
background: var(--bg-elevated);
border-radius: 4px;
color: var(--text-secondary);
max-width: 80px;
overflow: hidden;
text-overflow: ellipsis;
white-space: nowrap;
}
.path-arrow { color: var(--muted); }

/* Recommandation banner */
.reco-banner {
background: linear-gradient(135deg, rgba(255,69,58,0.15), rgba(191,90,242,0.15));
border: 1px solid rgba(255,69,58,0.3);
border-radius: 12px;
padding: 1.25rem;
margin-bottom: 1.5rem;
display: none;
/* Positionnement identique au main */
margin-left: 260px;
max-width: 720px;
margin-right: auto;
margin-left: calc(260px + (100% - 260px - 720px) / 2);
padding-left: 2rem;
padding-right: 2rem;
position: relative;
z-index: 10;
}
.reco-banner.show { display: block; }
.reco-title {
font-size: 0.7rem;
text-transform: uppercase;
letter-spacing: 0.1em;
color: var(--accent);
margin-bottom: 0.5rem;
}
.reco-text {
font-size: 0.85rem;
color: var(--text-secondary);
line-height: 1.5;
}
.reco-authors {
display: flex;
flex-wrap: wrap;
gap: 0.4rem;
margin-top: 0.75rem;
}
.reco-author {
padding: 0.35rem 0.7rem;
background: var(--bg-elevated);
border: 1px solid var(--border);
border-radius: 6px;
font-size: 0.75rem;
color: var(--text);
cursor: pointer;
transition: all 0.2s;
}
.reco-author:hover {
border-color: var(--accent);
background: rgba(255,69,58,0.1);
}

/* Main content */
header {
position: fixed;
top: 0;
left: 260px;
right: 0;
z-index: 100;
background: rgba(13,13,13,0.95);
backdrop-filter: blur(12px);
-webkit-backdrop-filter: blur(12px);
border-bottom: 2px solid var(--border);
/* Pixel shadow */
box-shadow: 0 4px 0 var(--pixel-shadow);
overflow: visible;
}
.header-inner {
padding: 0.75rem 1.5rem;
display: flex;
align-items: center;
gap: 1rem;
overflow: visible;
flex-wrap: nowrap;
}
.header-title {
font-family: 'Courier New', monospace;
font-size: 0.75rem;
font-weight: 700;
letter-spacing: 0.15em;
text-transform: uppercase;
color: var(--muted);
white-space: nowrap;
flex-shrink: 0;
/* Subtle pixel effect */
text-shadow: 1px 1px 0 var(--pixel-shadow);
}
.header-actions { display: flex; gap: 0.5rem; align-items: center; flex-shrink: 0; flex-wrap: wrap; overflow: visible; }
.header-btn {
background: transparent;
border: 2px solid var(--border);
/* Pixel button style */
box-shadow: 2px 2px 0 var(--pixel-shadow);
transition: all 0.15s ease;
}
.header-btn:hover { 
border-color: var(--text); 
color: var(--text);
box-shadow: 3px 3px 0 var(--pixel-shadow);
transform: translate(-1px, -1px);
}
.header-btn:active {
box-shadow: 0 0 0 var(--pixel-shadow);
transform: translate(2px, 2px);
}
.header-btn {
color: var(--muted);
padding: 0.4rem 0.8rem;
border-radius: 2px;
font-size: 0.7rem;
font-weight: 500;
letter-spacing: 0.05em;
cursor: pointer;
transition: all 0.2s;
text-transform: uppercase;
}
.header-btn:hover { border-color: var(--text); color: var(--text); }

/* Bouton refresh avec animation */
.header-btn.refresh-btn {
background: linear-gradient(135deg, var(--accent), var(--accent-purple));
border-color: var(--accent);
color: white;
}
.header-btn.refresh-btn:hover {
border-color: var(--accent);
color: white;
box-shadow: 0 0 12px rgba(230, 57, 70, 0.4), 3px 3px 0 var(--pixel-shadow);
}
.header-btn.refresh-btn:active {
transform: translate(2px, 2px) rotate(180deg);
transition: all 0.3s ease;
}

/* Language selector */
.lang-selector {
display: flex;
align-items: center;
gap: 0.5rem;
}
.lang-select {
background: var(--bg-elevated);
border: 1px solid var(--border);
color: var(--text);
padding: 0.5rem 0.75rem;
border-radius: 8px;
font-size: 0.8rem;
cursor: pointer;
transition: all 0.2s;
appearance: none;
padding-right: 1.5rem;
background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%238e8e93' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10z'/%3E%3C/svg%3E");
background-repeat: no-repeat;
background-position: right 0.5rem center;
}
.lang-select:hover { border-color: var(--text); }
.lang-select:focus { outline: none; border-color: var(--text); }
.lang-icon { font-size: 0.9rem; }

/* Search Bar */
.search-container {
position: relative;
flex: 1;
min-width: 200px;
max-width: 400px;
margin: 0 1rem;
}
.search-input-wrapper {
position: relative;
display: flex;
align-items: center;
}
.search-input {
width: 100%;
padding: 0.6rem 1rem 0.6rem 2.5rem;
background: var(--bg-elevated);
border: 1px solid var(--border);
border-radius: 25px;
color: var(--text);
font-size: 0.85rem;
transition: all 0.2s;
min-width: 150px;
}
.search-input:focus {
outline: none;
border-color: var(--accent);
box-shadow: 0 0 0 3px rgba(230, 57, 70, 0.1);
}
.search-input::placeholder {
color: var(--muted);
}
.search-icon {
position: absolute;
left: 0.85rem;
color: var(--muted);
font-size: 0.9rem;
pointer-events: none;
}
.search-clear {
position: absolute;
right: 0.75rem;
background: none;
border: none;
color: var(--muted);
cursor: pointer;
font-size: 1rem;
display: none;
padding: 0.25rem;
}
.search-clear.visible { display: block; }
.search-clear:hover { color: var(--text); }

main {
margin-left: 260px;
max-width: 720px;
margin-right: auto;
margin-left: calc(260px + (100% - 260px - 720px) / 2);
padding: 8rem 2rem 4rem; /* 8rem ~= header 56px + exploration ~80px */
}
@media (max-width: 1100px) {
main { margin-left: 260px; margin-right: 1rem; }
.reco-banner { margin-left: 260px; margin-right: 1rem; max-width: none; }
}

/* Search Results Overlay */
.search-results-overlay {
position: fixed;
top: 0;
left: 0;
right: 0;
bottom: 0;
background: rgba(0, 0, 0, 0.9);
z-index: 400;
display: none;
overflow-y: auto;
}
.search-results-overlay.open { display: block; }
.search-results-container {
max-width: 800px;
margin: 0 auto;
padding: 2rem;
}
.search-results-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 1.5rem;
padding-bottom: 1rem;
border-bottom: 1px solid var(--border);
}
.search-results-title {
font-size: 1.25rem;
font-weight: 600;
color: var(--text);
}
.search-results-query {
color: var(--accent);
}
.search-results-close {
background: none;
border: none;
color: var(--text);
font-size: 1.5rem;
cursor: pointer;
padding: 0.5rem;
}
.search-results-tabs {
display: flex;
gap: 0.5rem;
margin-bottom: 1.5rem;
flex-wrap: wrap;
}
.search-tab {
padding: 0.5rem 1rem;
background: var(--bg-elevated);
border: 1px solid var(--border);
border-radius: 20px;
color: var(--text-secondary);
font-size: 0.8rem;
cursor: pointer;
transition: all 0.2s;
}
.search-tab:hover { border-color: var(--text); color: var(--text); }
.search-tab.active {
background: var(--accent);
border-color: var(--accent);
color: white;
}
.search-tab .count {
margin-left: 0.35rem;
opacity: 0.7;
}
.search-results-grid {
display: grid;
gap: 1rem;
}
.search-result-card {
background: var(--bg-card);
border: 1px solid var(--border);
border-radius: 8px;
padding: 1rem 1.25rem;
cursor: pointer;
transition: all 0.2s;
}
.search-result-card:hover {
border-color: var(--accent);
transform: translateY(-2px);
}
.search-result-title {
font-size: 1rem;
font-weight: 600;
color: var(--text);
margin-bottom: 0.35rem;
}
.search-result-author {
font-size: 0.85rem;
color: var(--accent);
margin-bottom: 0.5rem;
}
.search-result-snippet {
font-size: 0.8rem;
color: var(--text-secondary);
line-height: 1.5;
display: -webkit-box;
-webkit-line-clamp: 3;
-webkit-box-orient: vertical;
overflow: hidden;
}
.search-result-snippet mark {
background: rgba(230, 57, 70, 0.3);
color: var(--text);
padding: 0 0.15rem;
border-radius: 2px;
}
.search-result-meta {
display: flex;
gap: 0.75rem;
margin-top: 0.75rem;
font-size: 0.7rem;
color: var(--muted);
}
.search-result-source {
display: flex;
align-items: center;
gap: 0.35rem;
}
.search-loading {
text-align: center;
padding: 3rem;
color: var(--muted);
}
.search-no-results {
text-align: center;
padding: 3rem;
color: var(--muted);
}
.search-no-results-icon {
font-size: 3rem;
margin-bottom: 1rem;
}

.card {
background: var(--bg-card);
border: 2px solid var(--border);
border-radius: 0;
margin-bottom: 2.5rem;
overflow: hidden;
opacity: 0;
transform: translateY(20px);
transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
position: relative;
/* Pixel art shadow */
box-shadow: 4px 4px 0 var(--pixel-shadow);
}
.card::before {
content: '';
position: absolute;
top: 0;
left: 0;
width: 4px;
height: 100%;
background: linear-gradient(180deg, var(--accent) 0%, var(--accent-purple) 100%);
/* Pixel stepped gradient */
background: var(--accent);
}
.card:hover { 
transform: translateY(-3px); 
box-shadow: 6px 6px 0 var(--pixel-shadow), -2px -2px 0 var(--accent);
}
.card.show { opacity: 1; transform: translateY(0); }
.card.show:hover { transform: translateY(-3px); }

.card-head {
padding: 1.5rem 1.5rem 0.75rem;
padding-left: 1.75rem;
display: flex;
justify-content: space-between;
align-items: flex-start;
gap: 1rem;
border-bottom: 2px dashed var(--border);
}
.author {
font-family: 'Playfair Display', serif;
font-size: 1.1rem;
font-weight: 600;
color: var(--text);
letter-spacing: 0.02em;
}
.work {
font-size: 0.8rem;
color: var(--muted);
margin-top: 0.25rem;
font-weight: 400;
font-style: italic;
}
.tag {
font-size: 0.55rem;
font-weight: 700;
text-transform: uppercase;
letter-spacing: 0.12em;
padding: 0.35rem 0.75rem;
background: transparent;
color: var(--muted);
border: 2px solid var(--border);
border-radius: 0;
/* Pixel effect */
box-shadow: 2px 2px 0 var(--pixel-shadow);
transition: all 0.15s ease;
}
.tag:hover {
transform: translate(-1px, -1px);
box-shadow: 3px 3px 0 var(--pixel-shadow);
}
.tag.poésie { border-color: var(--accent-purple); color: var(--accent-purple); }
.tag.fable { border-color: var(--accent-tertiary); color: var(--accent-tertiary); }
.tag.nouvelle { border-color: var(--accent-secondary); color: var(--accent-secondary); }
.tag.mystique { border-color: #c9a227; color: #c9a227; }
.tag.philosophie { border-color: #8b7355; color: #a08060; }
.tag.roman { border-color: #c44569; color: #c44569; }
.tag.théâtre { border-color: #3d9be9; color: #3d9be9; }
.tag.conte { border-color: var(--accent-secondary); color: var(--accent-secondary); }

/* ═══════════════════════════════════════════════════════════
   EXPLORATION - Container avec onglets
   ═══════════════════════════════════════════════════════════ */
.exploration-container {
position: sticky;
top: 56px;
z-index: 90;
margin-left: 260px;
background: var(--bg);
border-bottom: 2px solid var(--border);
box-shadow: 0 4px 0 var(--pixel-shadow);
padding-top: 0;
}

.exploration-tabs {
display: flex;
gap: 0;
padding: 0 1rem;
border-bottom: 2px solid var(--border);
background: var(--bg);
}

.exploration-tab {
padding: 0.6rem 1.2rem;
background: none;
border: none;
border-bottom: 2px solid transparent;
color: var(--text-secondary);
font-size: 0.85rem;
font-weight: 500;
cursor: pointer;
transition: all 0.2s;
display: flex;
align-items: center;
gap: 0.4rem;
}

.exploration-tab:hover {
color: var(--text);
background: rgba(255,255,255,0.03);
}

.exploration-tab.active {
color: var(--accent);
border-bottom-color: var(--accent);
}

/* Ambiances de lecture */
.ambiance-bar {
display: flex;
gap: 0.5rem;
padding: 0.75rem 1rem;
background: var(--bg-card);
overflow-x: auto;
scrollbar-width: none;
-ms-overflow-style: none;
}
.ambiance-bar::-webkit-scrollbar { display: none; }
.ambiance-pill {
display: flex;
align-items: center;
gap: 0.4rem;
padding: 0.5rem 1rem;
background: var(--bg-elevated);
border: 1px solid var(--border);
border-radius: 20px;
font-size: 0.8rem;
color: var(--text-secondary);
cursor: pointer;
transition: all 0.2s;
white-space: nowrap;
flex-shrink: 0;
}
.ambiance-pill:hover {
border-color: var(--text-secondary);
color: var(--text);
transform: translateY(-1px);
}
.ambiance-pill.active {
background: var(--accent);
border-color: var(--accent);
color: white;
box-shadow: 0 2px 8px rgba(255,69,58,0.3);
}
.ambiance-pill .ambiance-icon {
font-size: 1rem;
}
.ambiance-pill .ambiance-name {
font-weight: 500;
}
.ambiance-intro {
position: sticky;
top: 92px; /* Sous header + barre ambiance */
z-index: 85;
padding: 1rem 1.5rem;
text-align: center;
background: linear-gradient(135deg, rgba(255,69,58,0.08), rgba(191,90,242,0.08));
backdrop-filter: blur(10px);
-webkit-backdrop-filter: blur(10px);
border-bottom: 1px solid var(--border);
animation: fadeIn 0.5s ease;
margin-left: 260px;
}
.ambiance-intro .close-intro {
position: absolute;
right: 1rem;
top: 50%;
transform: translateY(-50%);
background: none;
border: none;
color: var(--muted);
cursor: pointer;
font-size: 1.2rem;
opacity: 0.6;
transition: opacity 0.2s;
}
.ambiance-intro .close-intro:hover {
opacity: 1;
}
@media (max-width: 900px) {
.ambiance-intro {
    margin-left: 0;
    top: 88px;
}
}
.ambiance-intro h2 {
font-family: 'Playfair Display', serif;
font-size: 1.5rem;
color: var(--text);
margin-bottom: 0.5rem;
}
.ambiance-intro .period-badge {
display: inline-block;
padding: 0.2rem 0.6rem;
background: rgba(255,255,255,0.1);
border-radius: 12px;
font-size: 0.75rem;
color: var(--accent-secondary);
font-style: normal;
margin-bottom: 0.5rem;
border: 1px solid rgba(255,255,255,0.1);
}
.ambiance-intro p {
font-size: 0.9rem;
color: var(--text-secondary);
font-style: italic;
max-width: 500px;
margin: 0 auto;
}
.ambiance-intro .ambiance-tags {
display: flex;
justify-content: center;
gap: 0.5rem;
margin-top: 0.75rem;
flex-wrap: wrap;
}
.ambiance-intro .ambiance-tag {
font-size: 0.7rem;
padding: 0.25rem 0.6rem;
background: var(--bg-card);
border: 1px solid var(--border);
border-radius: 12px;
color: var(--muted);
cursor: pointer;
transition: all 0.2s ease;
}
.ambiance-intro .ambiance-tag:hover {
background: var(--accent);
color: white;
border-color: var(--accent);
transform: translateY(-1px);
}
.ambiance-intro .ambiance-tag.more-authors {
cursor: default;
opacity: 0.7;
}
.ambiance-intro .ambiance-tag.more-authors:hover {
background: var(--bg-card);
color: var(--muted);
border-color: var(--border);
transform: none;
}

/* Language badge */
.lang-badge {
font-size: 0.6rem;
font-weight: 700;
text-transform: uppercase;
letter-spacing: 0.05em;
padding: 0.25rem 0.5rem;
background: rgba(255,255,255,0.1);
color: var(--muted);
border-radius: 4px;
margin-left: 0.5rem;
}
.lang-badge.en { background: rgba(0,82,180,0.2); color: #64b5f6; }
.lang-badge.de { background: rgba(255,204,0,0.2); color: #ffd54f; }
.lang-badge.it { background: rgba(0,140,69,0.2); color: #81c784; }
.lang-badge.es { background: rgba(198,11,30,0.2); color: #e57373; }
.lang-badge.pt { background: rgba(0,102,0,0.2); color: #66bb6a; }
.lang-badge.ru { background: rgba(0,57,166,0.2); color: #7986cb; }
.lang-badge.la { background: rgba(139,90,43,0.2); color: #bcaaa4; }
.lang-badge.zh { background: rgba(222,41,16,0.2); color: #ef5350; }
.lang-badge.ja { background: rgba(188,0,45,0.2); color: #f06292; }
.lang-badge.ar { background: rgba(0,122,61,0.2); color: #4db6ac; }
.lang-badge.el { background: rgba(13,94,175,0.2); color: #4fc3f7; }

.card-body {
padding: 1.25rem 1.5rem 1.25rem 1.75rem;
font-size: 1.05rem;
line-height: 1.85;
position: relative;
color: var(--text-secondary);
font-weight: 300;
cursor: default;
}
.card-body .like-heart-overlay {
position: absolute;
top: 50%;
left: 50%;
transform: translate(-50%, -50%) scale(0);
font-size: 4rem;
pointer-events: none;
opacity: 0;
z-index: 10;
filter: drop-shadow(0 0 10px rgba(255,69,58,0.5));
}
.card-body .like-heart-overlay.animate {
animation: likeHeartPop 0.8s ease-out forwards;
}
@keyframes likeHeartPop {
0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
15% { transform: translate(-50%, -50%) scale(1.3); opacity: 1; }
30% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
100% { transform: translate(-50%, -50%) scale(1); opacity: 0; }
}
.text-teaser {
white-space: pre-wrap;
}
.text-teaser::after {
content: ' ▪▪▪';
color: var(--muted);
font-size: 0.7em;
}
.text-full {
display: none;
white-space: pre-wrap;
margin-top: 1.25rem;
padding-top: 1.25rem;
border-top: 1px solid var(--border);
animation: fadeIn 0.4s ease;
}
.text-full.visible { display: block; }
@keyframes fadeIn {
from { opacity: 0; transform: translateY(-10px); }
to { opacity: 1; transform: translateY(0); }
}

/* Bouton Suite - style brutaliste */
.btn-suite {
display: inline-flex;
align-items: center;
gap: 0.75rem;
margin-top: 1.25rem;
padding: 0.6rem 1.25rem;
background: transparent;
border: 1px solid var(--accent);
border-radius: 0;
color: var(--accent);
font-size: 0.7rem;
font-weight: 600;
letter-spacing: 0.1em;
text-transform: uppercase;
cursor: pointer;
transition: all 0.2s ease;
}
.btn-suite:hover {
background: var(--accent);
color: var(--bg);
}
.btn-suite.exhausted {
border-color: var(--muted);
color: var(--muted);
cursor: default;
}
.btn-suite .arrow {
transition: transform 0.3s;
}
.btn-suite:hover .arrow {
transform: translateX(3px);
}

/* Chunks de texte révélés progressivement */
.text-chunk {
margin-top: 1rem;
padding-top: 0.75rem;
}
.text-chunk + .text-chunk {
border-top: 1px dotted var(--border);
}

.card-foot {
padding: 1.25rem 1.75rem;
border-top: 1px solid var(--border);
display: flex;
flex-direction: column;
gap: 0.75rem;
}
.card-keywords {
display: flex;
flex-wrap: wrap;
gap: 0.4rem;
padding-bottom: 0.5rem;
}
.keyword-tag {
font-size: 0.65rem;
padding: 0.25rem 0.6rem;
background: rgba(255,255,255,0.03);
border: 1px solid var(--border);
border-radius: 12px;
color: var(--muted);
cursor: pointer;
transition: all 0.2s ease;
text-transform: lowercase;
}
.keyword-tag:hover {
background: var(--accent);
border-color: var(--accent);
color: white;
transform: translateY(-1px);
}
.keyword-tag::before {
content: '#';
opacity: 0.5;
}
.actions {
display: flex;
gap: 0.4rem;
flex-wrap: wrap;
justify-content: flex-start;
align-items: center;
}

/* Boutons d'action individuels */
.btn-like { transition: all 0.2s ease; }
.btn-like.active {
    background: var(--accent) !important;
    border-color: var(--accent) !important;
    color: white !important;
    animation: likePopIn 0.3s ease;
}
@keyframes likePopIn {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}

/* Texte des boutons - visible sur desktop */
.btn .btn-text {
    display: inline;
}

.btn {
background: transparent;
border: 1px solid var(--border);
color: var(--muted);
padding: 0.5rem 1rem;
border-radius: 0;
cursor: pointer;
font-family: inherit;
font-size: 0.65rem;
font-weight: 600;
letter-spacing: 0.05em;
text-transform: uppercase;
transition: all 0.2s ease;
text-decoration: none;
display: inline-flex;
align-items: center;
gap: 0.4rem;
}
.btn:hover { border-color: var(--text); color: var(--text); }
.btn.active { 
background: var(--accent); 
border-color: var(--accent); 
color: var(--bg); 
}

.feed-loading {
text-align: center;
padding: 4rem 1rem;
color: var(--muted);
font-size: 0.75rem;
letter-spacing: 0.1em;
text-transform: uppercase;
width: 100%;
max-width: 100%;
box-sizing: border-box;
}
.spinner {
width: 24px;
height: 24px;
border: 2px solid var(--border);
border-top-color: var(--accent);
border-radius: 50%;
margin: 0 auto 1rem;
animation: spin 0.8s linear infinite;
}
.spinner-small {
width: 16px;
height: 16px;
border: 2px solid var(--border);
border-top-color: var(--accent);
border-radius: 50%;
display: inline-block;
animation: spin 0.8s linear infinite;
vertical-align: middle;
margin-right: 0.5rem;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* ═══════════════════════════════════════════════════════════════════════════
   ✨ BANDEAU "NOUVEAUX TEXTES" (style Twitter)
   ═══════════════════════════════════════════════════════════════════════════ */
.new-texts-banner {
position: fixed;
top: 80px;
left: 50%;
transform: translateX(-50%) translateY(-100px);
background: linear-gradient(135deg, var(--accent), var(--accent-purple));
color: white;
padding: 0.75rem 1.5rem;
border-radius: 20px;
font-size: 0.85rem;
font-weight: 600;
cursor: pointer;
z-index: 150;
transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
box-shadow: 0 4px 20px rgba(230, 57, 70, 0.4), 4px 4px 0 var(--pixel-shadow);
display: flex;
align-items: center;
gap: 0.5rem;
}
.new-texts-banner.visible {
transform: translateX(-50%) translateY(0);
}
.new-texts-banner:hover {
transform: translateX(-50%) translateY(-2px);
box-shadow: 0 6px 24px rgba(230, 57, 70, 0.5), 5px 5px 0 var(--pixel-shadow);
}
.new-texts-banner:active {
transform: translateX(-50%) translateY(2px);
box-shadow: 0 2px 10px rgba(230, 57, 70, 0.3), 2px 2px 0 var(--pixel-shadow);
}

/* Indicateur de chargement en haut du feed */
.top-loading-indicator {
text-align: center;
padding: 1.5rem;
color: var(--muted);
font-size: 0.8rem;
letter-spacing: 0.1em;
text-transform: uppercase;
background: var(--bg-card);
border: 2px solid var(--border);
margin-bottom: 1.5rem;
animation: fadeIn 0.3s ease;
}

/* Animation pour les nouvelles cartes insérées en haut */
.card.card-new {
opacity: 0;
transform: translateY(-30px);
}
.card.card-new.show {
opacity: 1;
transform: translateY(0);
animation: slideInFromTop 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}
@keyframes slideInFromTop {
from {
    opacity: 0;
    transform: translateY(-30px);
}
to {
    opacity: 1;
    transform: translateY(0);
}
}

/* Highlight temporaire pour les nouvelles cartes */
.card.card-highlight {
box-shadow: 0 0 0 3px var(--accent), 4px 4px 0 var(--pixel-shadow);
animation: pulseHighlight 1.5s ease-in-out;
}
@keyframes pulseHighlight {
0%, 100% { box-shadow: 0 0 0 3px var(--accent), 4px 4px 0 var(--pixel-shadow); }
50% { box-shadow: 0 0 0 5px var(--accent), 0 0 20px rgba(230, 57, 70, 0.3), 4px 4px 0 var(--pixel-shadow); }
}

/* Bouton scroll to top avec indicateur de nouveaux contenus */
.scroll-top-btn {
position: fixed;
bottom: 2rem;
right: 2rem;
width: 48px;
height: 48px;
background: var(--bg-elevated);
border: 2px solid var(--border);
border-radius: 50%;
color: var(--text);
font-size: 1.2rem;
cursor: pointer;
z-index: 100;
opacity: 0;
transform: translateY(20px);
transition: all 0.3s ease;
box-shadow: 4px 4px 0 var(--pixel-shadow);
display: flex;
align-items: center;
justify-content: center;
}
.scroll-top-btn.visible {
opacity: 1;
transform: translateY(0);
}
.scroll-top-btn:hover {
background: var(--accent);
border-color: var(--accent);
transform: translateY(-2px);
box-shadow: 5px 5px 0 var(--pixel-shadow);
}
.scroll-top-btn.has-new {
background: linear-gradient(135deg, var(--accent), var(--accent-purple));
border-color: var(--accent);
animation: bounceNew 2s ease-in-out infinite;
}
.scroll-top-btn.has-new::after {
content: '✨';
position: absolute;
top: -8px;
right: -8px;
font-size: 0.8rem;
}
@keyframes bounceNew {
0%, 100% { transform: translateY(0); }
50% { transform: translateY(-5px); }
}

/* Mobile : ajuster le bandeau nouveaux textes */
@media screen and (max-width: 900px) {
.new-texts-banner {
    top: auto;
    bottom: 80px;
    font-size: 0.8rem;
    padding: 0.6rem 1.25rem;
}
.scroll-top-btn {
    bottom: 5rem;
    right: 1rem;
    width: 44px;
    height: 44px;
}
}

.toast {
position: fixed;
bottom: 2rem;
left: 50%;
transform: translateX(-50%) translateY(100px);
background: var(--bg-elevated);
border: 1px solid var(--accent);
color: var(--text);
padding: 0.9rem 1.75rem;
border-radius: 12px;
font-size: 0.85rem;
font-weight: 500;
z-index: 300;
transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
box-shadow: 0 8px 32px rgba(0,0,0,0.4);
}
.toast.show { transform: translateX(-50%) translateY(0); }

/* Toast mobile: au-dessus de la barre de navigation */
@media screen and (max-width: 900px) {
    .toast {
        bottom: 5rem;
    }
}

.progress {
position: fixed;
top: 0;
left: 280px;
right: 0;
height: 2px;
background: linear-gradient(90deg, var(--accent), var(--accent-secondary));
z-index: 1000;
transition: width 0.1s;
}

/* Reader overlay */
.reader-overlay {
position: fixed;
top: 0; left: 0; right: 0; bottom: 0;
background: var(--bg);
z-index: 200;
display: none;
flex-direction: column;
animation: fadeIn 0.3s ease;
}
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
.reader-overlay.open { display: flex; }
.reader-header {
padding: 1.25rem 2rem;
background: var(--bg-card);
border-bottom: 1px solid var(--border);
display: flex;
justify-content: space-between;
align-items: center;
}
.reader-title {
font-family: 'Playfair Display', serif;
font-size: 1.1rem;
font-weight: 400;
color: var(--text);
}
.reader-close {
background: var(--bg-elevated);
border: 1px solid var(--border);
color: var(--text);
width: 44px;
height: 44px;
border-radius: 12px;
font-size: 1.2rem;
cursor: pointer;
transition: all 0.2s;
display: flex;
align-items: center;
justify-content: center;
}
.reader-close:hover { border-color: var(--accent); color: var(--accent); }
.reader-content {
flex: 1;
overflow-y: auto;
padding: 3rem 2rem;
font-size: 1.15rem;
line-height: 2.2;
max-width: 700px;
margin: 0 auto;
width: 100%;
font-weight: 300;
}

/* Navigateur de Catégories - Barre flottante en bas */
.category-nav {
position: fixed;
bottom: 0;
left: 0;
right: 0;
background: var(--bg-card);
border-top: 1px solid var(--border);
padding: 0.75rem 1.5rem;
padding-right: 6rem; /* Espace pour le bouton fermer */
animation: slideUp 0.3s ease;
z-index: 100;
box-shadow: 0 -4px 20px rgba(0,0,0,0.15);
max-height: 40vh;
overflow-y: auto;
}
@keyframes slideUp { from { transform: translateY(100%); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

.cat-breadcrumbs {
display: flex;
flex-wrap: wrap;
gap: 0.5rem;
align-items: center;
font-size: 0.9rem;
margin-bottom: 1rem;
font-family: 'Courier Prime', monospace;
}
.cat-crumb {
cursor: pointer;
color: var(--muted);
transition: color 0.2s;
}
.cat-crumb:hover { color: var(--accent); text-decoration: underline; }
.cat-crumb.active { color: var(--text); font-weight: bold; pointer-events: none; }
.cat-sep { color: var(--border); }

.cat-subcategories {
display: flex;
flex-wrap: wrap;
gap: 0.5rem;
}
.cat-pill {
display: inline-flex;
align-items: center;
padding: 0.3rem 0.8rem;
background: var(--bg);
border: 1px solid var(--border);
border-radius: 999px;
font-size: 0.8rem;
cursor: pointer;
transition: all 0.2s;
color: var(--text-secondary);
}
.cat-pill:hover {
border-color: var(--accent);
color: var(--accent);
transform: translateY(-2px);
}
.cat-pill .count {
font-size: 0.7em;
margin-left: 0.4rem;
opacity: 0.6;
}
.cat-close {
position: absolute;
top: 0.5rem;
right: 1rem;
background: var(--danger);
border: none;
color: white;
font-size: 0.85rem;
cursor: pointer;
padding: 0.4rem 0.8rem;
border-radius: 6px;
font-weight: 500;
}
.cat-close:hover { background: #c0392b; }

.empty-state {
text-align: center;
padding: 3rem 1rem;
color: var(--muted);
font-style: italic;
line-height: 1.8;
}

/* Branches enrichies */
.branches-container {
display: flex;
flex-direction: column;
gap: 1rem;
}
.branch-group {
background: var(--card-bg);
border-radius: 8px;
padding: 0.8rem;
border: 1px solid var(--border);
}
.branch-group-title {
font-size: 0.75rem;
font-weight: 600;
color: var(--accent);
margin-bottom: 0.5rem;
text-transform: uppercase;
letter-spacing: 0.5px;
}
.branch-items {
display: flex;
flex-wrap: wrap;
gap: 0.4rem;
}

/* Favorites View Overlay */
.favorites-overlay {
position: fixed;
top: 0; left: 0; right: 0; bottom: 0;
background: rgba(13,13,13,0.95);
z-index: 250;
display: none;
animation: fadeIn 0.3s ease;
overflow-y: auto;
}
.favorites-overlay.open { display: block; }
.favorites-view {
max-width: 900px;
margin: 0 auto;
padding: 2rem;
}
.favorites-header {
display: flex;
justify-content: space-between;
align-items: center;
padding-bottom: 1.5rem;
margin-bottom: 2rem;
border-bottom: 1px solid var(--border);
}
.favorites-title {
font-size: 0.8rem;
font-weight: 700;
letter-spacing: 0.2em;
color: var(--accent);
}
.favorites-grid {
display: flex;
flex-direction: column;
gap: 1.5rem;
}
.fav-card {
background: var(--bg-card);
border: 1px solid var(--border);
border-left: 4px solid var(--accent);
padding: 1.5rem;
transition: all 0.2s;
}
.fav-card:hover {
border-color: var(--accent);
box-shadow: -4px 4px 0 var(--border);
}
.fav-card-head {
display: flex;
justify-content: space-between;
align-items: flex-start;
margin-bottom: 1rem;
}
.fav-card-author {
font-family: 'Playfair Display', serif;
font-size: 1rem;
font-weight: 600;
color: var(--text);
}
.fav-card-title {
font-size: 0.8rem;
color: var(--muted);
font-style: italic;
margin-top: 0.25rem;
}
.fav-card-text {
font-size: 0.95rem;
line-height: 1.8;
color: var(--text-secondary);
white-space: pre-wrap;
}
.fav-card-actions {
margin-top: 1rem;
padding-top: 1rem;
border-top: 1px solid var(--border);
display: flex;
gap: 0.5rem;
}
.fav-empty {
text-align: center;
padding: 4rem 2rem;
color: var(--muted);
}
.fav-empty-icon {
font-size: 3rem;
margin-bottom: 1rem;
opacity: 0.3;
}
.fav-empty-text {
font-size: 0.8rem;
letter-spacing: 0.1em;
text-transform: uppercase;
}

/* Trending view styles */
.trending-view {
max-width: 700px;
}
.trending-subtitle {
text-align: center;
font-size: 0.85rem;
color: var(--muted);
margin-bottom: 2rem;
font-style: italic;
}
.trending-feed {
display: flex;
flex-direction: column;
gap: 1.5rem;
}
.trending-loading {
text-align: center;
padding: 3rem;
color: var(--muted);
}
.trending-card {
background: var(--bg-card);
border: 1px solid var(--border);
border-radius: 8px;
overflow: hidden;
transition: all 0.3s ease;
}
.trending-card:hover {
border-color: var(--accent);
transform: translateY(-2px);
box-shadow: 0 8px 25px rgba(0,0,0,0.3);
}
.trending-card-header {
padding: 1rem 1.25rem;
background: linear-gradient(135deg, rgba(255,69,58,0.05), rgba(191,90,242,0.05));
border-bottom: 1px solid var(--border);
display: flex;
justify-content: space-between;
align-items: center;
}
.trending-card-author {
display: flex;
align-items: center;
gap: 0.75rem;
cursor: pointer;
}
.trending-card-author:hover .trending-username {
color: var(--accent);
}
.trending-avatar {
width: 36px;
height: 36px;
border-radius: 50%;
background: linear-gradient(135deg, var(--accent), var(--accent-secondary));
display: flex;
align-items: center;
justify-content: center;
font-size: 0.9rem;
font-weight: 600;
color: white;
}
.trending-username {
font-size: 0.85rem;
font-weight: 600;
color: var(--text);
transition: color 0.2s;
}
.trending-time {
font-size: 0.7rem;
color: var(--muted);
}
.trending-rank {
font-size: 1.5rem;
opacity: 0.3;
}
.trending-card-body {
padding: 1.25rem;
}
.trending-text {
font-size: 1.05rem;
line-height: 1.85;
color: var(--text);
font-family: 'Playfair Display', serif;
white-space: pre-wrap;
margin-bottom: 1rem;
}
.trending-source {
font-size: 0.8rem;
color: var(--muted);
font-style: italic;
padding-top: 0.75rem;
border-top: 1px solid var(--border);
}
.trending-source strong {
color: var(--text-secondary);
}
.trending-card-footer {
padding: 0.75rem 1.25rem;
background: rgba(0,0,0,0.2);
display: flex;
justify-content: space-between;
align-items: center;
}
.trending-stats {
display: flex;
gap: 1.5rem;
}
.trending-stat {
display: flex;
align-items: center;
gap: 0.4rem;
font-size: 0.85rem;
color: var(--muted);
}
.trending-stat.hot {
color: #ff6b6b;
}
.trending-actions {
display: flex;
gap: 0.5rem;
}
.trending-action-btn {
background: transparent;
border: 1px solid var(--border);
color: var(--muted);
padding: 0.4rem 0.8rem;
border-radius: 4px;
font-size: 0.75rem;
cursor: pointer;
transition: all 0.2s;
}
.trending-action-btn:hover {
background: var(--accent);
border-color: var(--accent);
color: white;
}
.trending-action-btn.liked {
background: var(--accent);
border-color: var(--accent);
color: white;
}
.trending-empty {
text-align: center;
padding: 4rem 2rem;
color: var(--muted);
}
.trending-empty-icon {
font-size: 3rem;
margin-bottom: 1rem;
opacity: 0.3;
}

/* Bouton favoris dans le header */
.favorites-btn {
color: var(--accent) !important;
border-color: var(--accent) !important;
}
.favorites-btn:hover {
background: var(--accent) !important;
color: var(--bg) !important;
}

/* Statistiques de lecture - Design épuré */
.reading-stats-section {
background: transparent;
border: none;
padding: 0 !important;
}
.reading-stats-section h3 {
display: none;
}
.reading-stats-grid {
display: flex;
flex-direction: column;
gap: 0;
}
.reading-stat-item {
display: flex;
align-items: center;
gap: 0.75rem;
padding: 0.6rem 0;
background: transparent;
border: none;
border-bottom: 1px solid var(--border);
}
.reading-stat-item:last-child {
border-bottom: none;
}
.reading-stat-icon {
font-size: 1.1rem;
width: 32px;
height: 32px;
display: flex;
align-items: center;
justify-content: center;
background: var(--bg-elevated);
border-radius: 8px;
flex-shrink: 0;
}
.reading-stat-content {
flex: 1;
display: flex;
flex-direction: column;
}
.reading-stat-value {
font-family: 'Playfair Display', serif;
font-size: 1.1rem;
font-weight: 700;
color: var(--text);
line-height: 1.2;
}
.reading-stat-label {
font-size: 0.7rem;
color: var(--muted);
line-height: 1.2;
}
.streak-item .reading-stat-value {
color: var(--accent);
}
.streak-section {
margin-top: 0.75rem;
padding-top: 0.75rem;
border-top: 1px solid var(--border);
}
.streak-bar {
height: 4px;
background: var(--border);
border-radius: 2px;
overflow: hidden;
margin-bottom: 0.5rem;
}
.streak-progress {
height: 100%;
background: linear-gradient(90deg, var(--accent), #ff9500);
width: 0%;
transition: width 0.5s ease;
}
.streak-hint {
font-size: 0.7rem;
color: var(--muted);
text-align: center;
font-style: italic;
}
.weekly-chart {
display: flex;
justify-content: space-between;
align-items: flex-end;
height: 40px;
gap: 4px;
margin-top: 0.75rem;
padding-top: 0.75rem;
border-top: 1px solid var(--border);
}
.weekly-bar {
flex: 1;
background: var(--border);
min-height: 4px;
transition: all 0.3s;
position: relative;
}
.weekly-bar.active {
background: var(--accent);
}
.weekly-bar.today {
background: linear-gradient(to top, var(--accent), #ff9500);
box-shadow: 0 0 8px rgba(255,69,58,0.5);
}
.weekly-bar::after {
content: attr(data-day);
position: absolute;
bottom: -15px;
left: 50%;
transform: translateX(-50%);
font-size: 0.55rem;
color: var(--muted);
}

/* Achievement popup */
.achievement-popup {
position: fixed;
bottom: 2rem;
right: 2rem;
background: linear-gradient(135deg, rgba(30,30,32,0.98), rgba(20,20,22,0.98));
border: 2px solid var(--accent);
border-radius: 0;
padding: 1.25rem 1.5rem;
display: flex;
align-items: center;
gap: 1rem;
z-index: 1000;
/* Pixel art style */
box-shadow: 4px 4px 0 var(--pixel-shadow);
box-shadow: 0 8px 32px rgba(255,69,58,0.3), 0 0 60px rgba(255,69,58,0.1);
transform: translateX(120%);
transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}
.achievement-popup.show { transform: translateX(0); }
.achievement-icon { font-size: 2.5rem; animation: bounce 0.6s ease infinite; }
@keyframes bounce {
0%, 100% { transform: translateY(0); }
50% { transform: translateY(-8px); }
}
.achievement-info { display: flex; flex-direction: column; gap: 0.25rem; }
.achievement-title { font-size: 0.7rem; color: var(--accent); text-transform: uppercase; letter-spacing: 1px; }
.achievement-name { font-family: 'Playfair Display', serif; font-size: 1.1rem; font-weight: 600; color: var(--text); }
.achievement-desc { font-size: 0.8rem; color: var(--text-secondary); }

/* Achievement badges grid - Enhanced */
.achievements { 
display: flex; 
flex-direction: column;
gap: 0.5rem; 
}
.achievement {
display: flex;
align-items: center;
gap: 0.75rem;
padding: 0.75rem;
background: var(--bg-elevated);
border: 1px solid var(--border);
border-radius: 12px;
transition: all 0.3s;
cursor: pointer;
position: relative;
overflow: hidden;
}
.achievement:hover {
background: var(--bg-card);
transform: translateX(4px);
}
.achievement.locked {
opacity: 0.6;
}
.achievement.locked .badge-icon {
filter: grayscale(1);
}
.achievement.unlocked {
border-color: var(--accent);
background: linear-gradient(135deg, rgba(255,69,58,0.1), transparent);
}
.achievement.unlocked .badge-icon {
animation: badgeBounce 2s ease infinite;
}
@keyframes badgeBounce {
0%, 100% { transform: scale(1); }
50% { transform: scale(1.1); }
}
.badge-icon {
font-size: 1.8rem;
width: 40px;
height: 40px;
display: flex;
align-items: center;
justify-content: center;
background: var(--bg-card);
border-radius: 10px;
flex-shrink: 0;
}
.badge-info {
flex: 1;
min-width: 0;
}
.badge-name {
font-family: 'Playfair Display', serif;
font-size: 0.9rem;
font-weight: 600;
color: var(--text);
display: flex;
align-items: center;
gap: 0.5rem;
}
.badge-name .unlocked-check {
color: #30d158;
font-size: 0.8rem;
}
.badge-desc {
font-size: 0.75rem;
color: var(--text-secondary);
margin-top: 0.2rem;
}
.badge-progress {
margin-top: 0.4rem;
}
.badge-progress-bar {
height: 4px;
background: var(--border);
border-radius: 2px;
overflow: hidden;
}
.badge-progress-fill {
height: 100%;
background: linear-gradient(90deg, var(--accent), #bf5af2);
border-radius: 2px;
transition: width 0.5s ease;
}
.badge-progress-text {
font-size: 0.65rem;
color: var(--text-muted);
margin-top: 0.2rem;
}
.badges-summary {
display: flex;
justify-content: space-between;
align-items: center;
padding: 0.5rem 0;
margin-bottom: 0.5rem;
border-bottom: 1px solid var(--border);
}
.badges-count {
font-size: 0.8rem;
color: var(--text-secondary);
}
.badges-count span {
color: var(--accent);
font-weight: 600;
}
.badges-toggle {
font-size: 0.7rem;
color: var(--accent);
cursor: pointer;
padding: 0.25rem 0.5rem;
border-radius: 6px;
transition: background 0.2s;
}
.badges-toggle:hover {
background: rgba(255,69,58,0.1);
}
.achievements.collapsed .achievement.locked {
display: none;
}
@keyframes unlockPulse {
0%, 100% { box-shadow: 0 0 12px rgba(255,69,58,0.3); }
50% { box-shadow: 0 0 20px rgba(255,69,58,0.5); }
}

/* Fun stat */
.fun-stat {
margin-top: 1rem;
padding: 0.75rem;
background: linear-gradient(135deg, rgba(255,69,58,0.1), rgba(191,90,242,0.1));
border-radius: 10px;
font-size: 0.75rem;
color: var(--text-secondary);
text-align: center;
font-style: italic;
transition: opacity 0.3s;
}

/* Reading path */
.reading-path {
display: flex;
flex-wrap: wrap;
align-items: center;
gap: 0.25rem;
margin-top: 0.75rem;
padding: 0.5rem;
background: var(--bg-elevated);
border-radius: 8px;
font-size: 0.7rem;
}
.path-node {
background: var(--bg-card);
padding: 0.25rem 0.5rem;
border-radius: 4px;
color: var(--text-secondary);
border: 1px solid var(--border);
}
.path-node:last-of-type { 
color: var(--accent); 
border-color: var(--accent); 
}
.path-arrow { color: var(--text-muted); font-size: 0.6rem; }

/* Related authors (dans les cartes) */
.related-authors {
padding: 1rem 1.5rem;
background: linear-gradient(135deg, rgba(255,69,58,0.05), rgba(191,90,242,0.05));
border-top: 1px solid var(--border);
}
.related-title {
font-size: 0.75rem;
color: var(--text-secondary);
margin-bottom: 0.75rem;
font-weight: 500;
}
.related-list {
display: flex;
flex-wrap: wrap;
gap: 0.5rem;
}
.related-btn {
background: var(--bg-elevated);
border: 1px solid var(--border);
color: var(--text);
padding: 0.4rem 0.8rem;
border-radius: 20px;
font-size: 0.8rem;
cursor: pointer;
transition: all 0.2s;
}
.related-btn:hover {
border-color: var(--accent);
color: var(--accent);
transform: scale(1.05);
}
.no-related {
font-size: 0.8rem;
color: var(--text-muted);
display: flex;
align-items: center;
gap: 0.75rem;
}
.btn-small {
padding: 0.3rem 0.6rem;
font-size: 0.75rem;
}
.explore-hint {
font-size: 0.7rem;
opacity: 0.5;
transition: opacity 0.2s;
}
.card-head:hover .explore-hint {
opacity: 1;
}

/* ═══════════════════════════════════════════════════════════
   🐦 SOCIAL FEATURES - Style Twitter/X
   ═══════════════════════════════════════════════════════════ */

/* Modal Auth */
.auth-modal {
position: fixed;
top: 0; left: 0; right: 0; bottom: 0;
background: rgba(0,0,0,0.85);
z-index: 500;
display: none;
align-items: center;
justify-content: center;
animation: fadeIn 0.3s ease;
}
.auth-modal.open { display: flex; }
.auth-box {
background: var(--bg-card);
border: 1px solid var(--border);
border-radius: 16px;
padding: 2rem;
width: 100%;
max-width: 400px;
margin: 1rem;
}
.auth-title {
font-family: 'Playfair Display', serif;
font-size: 1.5rem;
color: var(--text);
margin-bottom: 0.5rem;
text-align: center;
}
.auth-subtitle {
font-size: 0.85rem;
color: var(--muted);
text-align: center;
margin-bottom: 1.5rem;
}
.auth-input {
width: 100%;
padding: 0.9rem 1rem;
background: var(--bg);
border: 1px solid var(--border);
border-radius: 8px;
color: var(--text);
font-size: 0.95rem;
margin-bottom: 0.75rem;
transition: border-color 0.2s;
}
.auth-input:focus {
outline: none;
border-color: var(--accent);
}
.auth-input::placeholder { color: var(--muted); }
.auth-btn {
width: 100%;
padding: 0.9rem;
background: var(--accent);
border: none;
border-radius: 8px;
color: white;
font-size: 0.9rem;
font-weight: 600;
cursor: pointer;
transition: all 0.2s;
margin-top: 0.5rem;
}
.auth-btn:hover { background: #ff4757; transform: scale(1.02); }
.auth-btn:disabled { opacity: 0.5; cursor: not-allowed; }
.auth-btn.secondary {
background: transparent;
border: 1px solid var(--border);
color: var(--text-secondary);
}
.auth-btn.secondary:hover { border-color: var(--text); color: var(--text); }
.auth-divider {
display: flex;
align-items: center;
margin: 1.25rem 0;
color: var(--muted);
font-size: 0.8rem;
}
.auth-divider::before, .auth-divider::after {
content: '';
flex: 1;
height: 1px;
background: var(--border);
}
.auth-divider span { padding: 0 1rem; }
.auth-switch {
text-align: center;
margin-top: 1.25rem;
font-size: 0.85rem;
color: var(--muted);
}
.auth-switch a {
color: var(--accent);
cursor: pointer;
text-decoration: none;
}
.auth-switch a:hover { text-decoration: underline; }
.auth-forgot {
text-align: right;
margin-top: 0.25rem;
margin-bottom: 1rem;
font-size: 0.8rem;
}
.auth-forgot a {
color: var(--text-secondary);
cursor: pointer;
text-decoration: none;
}
.auth-forgot a:hover { color: var(--accent); text-decoration: underline; }
.auth-success {
background: rgba(42, 157, 143, 0.15);
border: 1px solid var(--accent-tertiary);
color: var(--accent-tertiary);
padding: 0.75rem;
border-radius: 8px;
margin-bottom: 1rem;
font-size: 0.85rem;
display: none;
}
.auth-success.show { display: block; }
.auth-close {
position: absolute;
top: 1rem;
right: 1rem;
background: none;
border: none;
color: var(--muted);
font-size: 1.5rem;
cursor: pointer;
}
.auth-close:hover { color: var(--text); }
.auth-error {
background: rgba(255,69,58,0.1);
border: 1px solid var(--accent);
color: var(--accent);
padding: 0.75rem;
border-radius: 8px;
font-size: 0.85rem;
margin-bottom: 1rem;
display: none;
}
.auth-error.show { display: block; }

/* User menu in header */
.user-menu {
position: relative;
display: flex;
align-items: center;
gap: 0.5rem;
}
.user-avatar {
width: 32px;
height: 32px;
border-radius: 50%;
background: linear-gradient(135deg, var(--accent), var(--accent-purple));
display: flex;
align-items: center;
justify-content: center;
font-size: 0.9rem;
cursor: pointer;
border: 2px solid transparent;
transition: border-color 0.2s;
}
.user-avatar:hover { border-color: var(--accent); }
.user-avatar img {
width: 100%;
height: 100%;
border-radius: 50%;
object-fit: cover;
}
.user-dropdown {
position: absolute;
top: 100%;
right: 0;
margin-top: 0.5rem;
background: var(--bg-card);
border: 1px solid var(--border);
border-radius: 12px;
min-width: 180px;
display: none;
box-shadow: 0 8px 32px rgba(0,0,0,0.4);
z-index: 100;
}
.user-dropdown.open { display: block; }
.user-dropdown-item {
padding: 0.75rem 1rem;
display: flex;
align-items: center;
gap: 0.6rem;
color: var(--text-secondary);
font-size: 0.85rem;
cursor: pointer;
transition: all 0.2s;
}
.user-dropdown-item:first-child { border-radius: 12px 12px 0 0; }
.user-dropdown-item:last-child { border-radius: 0 0 12px 12px; }
.user-dropdown-item:hover {
background: var(--bg-elevated);
color: var(--text);
}
.user-dropdown-item.danger:hover { color: var(--accent); }
.user-dropdown-divider {
height: 1px;
background: var(--border);
margin: 0.25rem 0;
}

/* Social Feed Tab */
.feed-tabs {
display: flex;
gap: 0;
background: var(--bg-card);
border: 1px solid var(--border);
border-radius: 8px;
padding: 0.25rem;
margin-bottom: 1.5rem;
}
.feed-tab {
flex: 1;
padding: 0.6rem 1rem;
background: transparent;
border: none;
color: var(--muted);
font-size: 0.8rem;
font-weight: 500;
cursor: pointer;
border-radius: 6px;
transition: all 0.2s;
}
.feed-tab:hover { color: var(--text); }
.feed-tab.active {
background: var(--accent);
color: white;
}
.feed-refresh {
padding: 0.5rem 0.7rem;
background: transparent;
border: none;
color: var(--muted);
font-size: 1rem;
cursor: pointer;
border-radius: 6px;
transition: all 0.3s;
margin-left: 0.5rem;
}
.feed-refresh:hover {
color: var(--accent);
transform: rotate(180deg);
}
.feed-refresh.spinning {
animation: spin 1s linear infinite;
}
@keyframes spin {
from { transform: rotate(0deg); }
to { transform: rotate(360deg); }
}
.feed-live-indicator {
padding: 0.4rem 1rem;
font-size: 0.75rem;
color: var(--muted);
text-align: center;
border-bottom: 1px solid var(--border);
}
.feed-live-indicator.new-content {
background: rgba(42, 157, 143, 0.1);
color: var(--accent);
cursor: pointer;
}

/* Share button on cards */
.btn-share {
background: transparent;
border: 1px solid var(--accent-tertiary);
color: var(--accent-tertiary);
}
.btn-share:hover {
background: var(--accent-tertiary);
color: var(--bg);
}

/* Selection highlight for sharing */
.text-selectable::selection {
background: rgba(42, 157, 143, 0.4);
}

/* Share Modal */
.share-modal {
position: fixed;
top: 0; left: 0; right: 0; bottom: 0;
background: rgba(0,0,0,0.85);
z-index: 500;
display: none;
align-items: center;
justify-content: center;
}
.share-modal.open { display: flex; }
.share-box {
background: var(--bg-card);
border: 1px solid var(--border);
border-radius: 16px;
padding: 1.5rem;
width: 100%;
max-width: 500px;
margin: 1rem;
}
.share-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 1rem;
}
.share-title {
font-size: 1rem;
font-weight: 600;
color: var(--text);
}
.share-preview {
background: var(--bg);
border-left: 3px solid var(--accent-tertiary);
padding: 1rem;
margin-bottom: 1rem;
border-radius: 0 8px 8px 0;
}
.share-preview-text {
font-family: 'Playfair Display', serif;
font-size: 1.1rem;
font-style: italic;
color: var(--text);
line-height: 1.6;
margin-bottom: 0.75rem;
}
.share-preview-source {
font-size: 0.8rem;
color: var(--muted);
}
.share-commentary {
width: 100%;
padding: 0.9rem;
background: var(--bg);
border: 1px solid var(--border);
border-radius: 8px;
color: var(--text);
font-size: 0.9rem;
resize: vertical;
min-height: 80px;
margin-bottom: 1rem;
font-family: inherit;
}
.share-commentary:focus { outline: none; border-color: var(--accent-tertiary); }
.share-actions {
display: flex;
gap: 0.75rem;
justify-content: flex-end;
}
.share-btn {
padding: 0.7rem 1.5rem;
border-radius: 8px;
font-size: 0.85rem;
font-weight: 600;
cursor: pointer;
transition: all 0.2s;
}
.share-btn.primary {
background: var(--accent-tertiary);
border: none;
color: white;
}
.share-btn.primary:hover { background: #25877b; }
.share-btn.secondary {
background: transparent;
border: 1px solid var(--border);
color: var(--text-secondary);
}
.share-btn.secondary:hover { border-color: var(--text); color: var(--text); }

/* ═══════════════════════════════════════════════════════════
   💬 COMMENTAIRES
   ═══════════════════════════════════════════════════════════ */
.comments-section {
border-top: 1px solid var(--border);
margin-top: 0.75rem;
padding-top: 0.75rem;
}
.comments-toggle {
display: flex;
align-items: center;
gap: 0.5rem;
background: none;
border: none;
color: var(--text-secondary);
font-size: 0.8rem;
cursor: pointer;
padding: 0.25rem 0;
transition: color 0.2s;
}
.comments-toggle:hover { color: var(--text); }
.comments-container {
display: none;
margin-top: 0.75rem;
}
.comments-container.open { display: block; }
.comments-list {
max-height: 300px;
overflow-y: auto;
margin-bottom: 0.75rem;
}
.comment-item {
display: flex;
gap: 0.6rem;
padding: 0.6rem 0;
border-bottom: 1px solid var(--border);
}
.comment-item:last-child { border-bottom: none; }
.comment-avatar {
width: 28px;
height: 28px;
border-radius: 50%;
background: linear-gradient(135deg, var(--accent-purple), var(--accent));
display: flex;
align-items: center;
justify-content: center;
font-size: 0.7rem;
color: white;
font-weight: 600;
flex-shrink: 0;
}
.comment-content {
flex: 1;
min-width: 0;
}
.comment-header {
display: flex;
align-items: baseline;
gap: 0.5rem;
margin-bottom: 0.2rem;
}
.comment-username {
font-size: 0.8rem;
font-weight: 600;
color: var(--text);
cursor: pointer;
}
.comment-username:hover { color: var(--accent); }
.comment-time {
font-size: 0.65rem;
color: var(--muted);
}
.comment-text {
font-size: 0.8rem;
color: var(--text-secondary);
line-height: 1.4;
}
.comment-actions {
display: flex;
align-items: center;
gap: 0.75rem;
margin-top: 0.4rem;
}
.comment-like-btn {
background: none;
border: none;
color: var(--muted);
font-size: 0.75rem;
cursor: pointer;
padding: 0.2rem 0.4rem;
border-radius: 10px;
transition: all 0.2s;
display: flex;
align-items: center;
gap: 0.3rem;
}
.comment-like-btn:hover {
background: rgba(255,69,58,0.1);
color: var(--accent);
}
.comment-like-btn.liked {
color: var(--accent);
}
.comment-like-btn.liked .like-icon {
animation: likePopComment 0.3s ease;
}
@keyframes likePopComment {
0% { transform: scale(1); }
50% { transform: scale(1.3); }
100% { transform: scale(1); }
}
.comment-like-count {
font-size: 0.7rem;
min-width: 12px;
}
.comment-delete {
background: none;
border: none;
color: var(--muted);
font-size: 0.7rem;
cursor: pointer;
padding: 0.1rem 0.3rem;
opacity: 0;
transition: opacity 0.2s, color 0.2s;
}
.comment-item:hover .comment-delete { opacity: 1; }
.comment-delete:hover { color: #e74c3c; }
.comment-input-area {
display: flex;
gap: 0.5rem;
align-items: flex-end;
}
.comment-input {
flex: 1;
background: var(--bg);
border: 1px solid var(--border);
border-radius: 16px;
padding: 0.5rem 0.9rem;
font-size: 0.8rem;
color: var(--text);
outline: none;
resize: none;
max-height: 80px;
min-height: 32px;
}
.comment-input:focus { border-color: var(--accent); }
.comment-send {
background: var(--accent-tertiary);
border: none;
border-radius: 50%;
width: 32px;
height: 32px;
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
color: white;
font-size: 0.8rem;
transition: transform 0.2s;
flex-shrink: 0;
}
.comment-send:hover { transform: scale(1.05); }
.comment-send:disabled { opacity: 0.5; cursor: not-allowed; }
.comments-empty {
text-align: center;
padding: 1rem;
color: var(--muted);
font-size: 0.8rem;
}

/* Extrait Card (social feed) */
.extrait-card {
background: var(--bg-card);
border: 1px solid var(--border);
border-radius: 12px;
padding: 1rem 1.25rem;
margin-bottom: 1rem;
transition: all 0.2s;
}
.extrait-card:hover {
border-color: var(--accent-tertiary);
}
.extrait-header {
display: flex;
align-items: center;
gap: 0.75rem;
margin-bottom: 0.75rem;
}
.extrait-avatar {
width: 40px;
height: 40px;
border-radius: 50%;
background: linear-gradient(135deg, var(--accent), var(--accent-purple));
display: flex;
align-items: center;
justify-content: center;
font-size: 1rem;
flex-shrink: 0;
}
.extrait-avatar img {
width: 100%;
height: 100%;
border-radius: 50%;
object-fit: cover;
}
.extrait-user-info {
flex: 1;
min-width: 0;
}
.extrait-username {
font-weight: 600;
font-size: 0.9rem;
color: var(--text);
}
.extrait-username-link {
cursor: pointer;
transition: color 0.2s;
}
.extrait-username-link:hover {
color: var(--accent);
}
.follow-btn {
padding: 0.3rem 0.8rem;
border-radius: 20px;
border: 1px solid var(--accent);
background: transparent;
color: var(--accent);
font-size: 0.75rem;
cursor: pointer;
transition: all 0.2s;
margin-left: auto;
}
.follow-btn:hover {
background: var(--accent);
color: white;
}
.follow-btn.following {
background: var(--accent-tertiary);
border-color: var(--accent-tertiary);
color: white;
}
.follow-btn.following:hover {
background: #dc3545;
border-color: #dc3545;
}
.user-profile-modal {
position: fixed;
top: 0;
left: 0;
right: 0;
bottom: 0;
background: rgba(0,0,0,0.85);
display: flex;
align-items: center;
justify-content: center;
z-index: 2000;
opacity: 0;
visibility: hidden;
transition: all 0.3s;
padding: 2rem;
}
.user-profile-modal.open {
opacity: 1;
visibility: visible;
}
.user-profile-content {
background: var(--bg-card);
border-radius: 16px;
padding: 0;
max-width: 600px;
width: 100%;
max-height: 85vh;
border: 1px solid var(--border);
display: flex;
flex-direction: column;
overflow: hidden;
}
.profile-header-section {
padding: 1.5rem;
border-bottom: 1px solid var(--border);
}
.profile-header {
display: flex;
align-items: center;
gap: 1rem;
}
.profile-avatar-large {
width: 72px;
height: 72px;
border-radius: 50%;
background: linear-gradient(135deg, var(--accent), var(--accent-purple));
display: flex;
align-items: center;
justify-content: center;
font-size: 1.75rem;
font-weight: 600;
color: white;
flex-shrink: 0;
}
.profile-info {
flex: 1;
}
.profile-info h3 {
font-size: 1.25rem;
margin-bottom: 0.5rem;
}
.profile-stats {
display: flex;
gap: 1.25rem;
font-size: 0.8rem;
color: var(--text-secondary);
}
.profile-stat {
cursor: pointer;
transition: color 0.2s;
}
.profile-stat:hover {
color: var(--text);
}
.profile-stat strong {
color: var(--text);
font-weight: 600;
}
.profile-actions {
display: flex;
gap: 0.75rem;
margin-top: 1rem;
}
.profile-actions button {
padding: 0.6rem 1.25rem;
border-radius: 8px;
border: none;
cursor: pointer;
font-weight: 500;
font-size: 0.85rem;
}
.btn-follow-large {
background: var(--accent);
color: white;
}
.btn-follow-large.following {
background: var(--accent-tertiary);
}
.btn-close-profile {
background: var(--bg-elevated);
color: var(--text-secondary);
border: 1px solid var(--border) !important;
}
.btn-close-profile:hover {
color: var(--text);
}
/* Profile Tabs */
.profile-tabs {
display: flex;
border-bottom: 1px solid var(--border);
}
.profile-tab {
flex: 1;
padding: 0.85rem 1rem;
background: none;
border: none;
color: var(--text-secondary);
font-size: 0.8rem;
font-weight: 500;
cursor: pointer;
transition: all 0.2s;
border-bottom: 2px solid transparent;
}
.profile-tab:hover {
color: var(--text);
background: var(--bg-elevated);
}
.profile-tab.active {
color: var(--accent);
border-bottom-color: var(--accent);
}
/* Profile Content */
.profile-content {
flex: 1;
overflow-y: auto;
padding: 1rem;
}
.profile-extraits-list {
display: flex;
flex-direction: column;
gap: 1rem;
}
.profile-extrait-card {
background: var(--bg-elevated);
border: 1px solid var(--border);
border-radius: 10px;
padding: 1rem;
}
.profile-extrait-text {
font-family: 'Playfair Display', serif;
font-size: 0.95rem;
line-height: 1.6;
color: var(--text);
margin-bottom: 0.75rem;
font-style: italic;
}
.profile-extrait-source {
font-size: 0.75rem;
color: var(--text-secondary);
}
.profile-extrait-source strong {
color: var(--text);
}
.profile-extrait-meta {
display: flex;
justify-content: space-between;
align-items: center;
margin-top: 0.5rem;
padding-top: 0.5rem;
border-top: 1px solid var(--border);
font-size: 0.7rem;
color: var(--muted);
}
.profile-empty {
text-align: center;
padding: 2rem;
color: var(--muted);
}
.profile-empty-icon {
font-size: 2.5rem;
margin-bottom: 0.75rem;
}
.profile-empty-text {
font-size: 0.85rem;
}
/* Friends list inside profile */
.friends-list {
margin-top: 1rem;
}
.friends-list h4 {
font-size: 0.8rem;
color: var(--text-secondary);
margin-bottom: 0.75rem;
}
.friend-item {
display: flex;
align-items: center;
gap: 0.75rem;
padding: 0.5rem;
border-radius: 8px;
cursor: pointer;
transition: background 0.2s;
}
.friend-item:hover {
background: var(--bg-elevated);
}
.friend-avatar {
width: 32px;
height: 32px;
border-radius: 50%;
background: linear-gradient(135deg, var(--accent-purple), var(--accent));
display: flex;
align-items: center;
justify-content: center;
font-size: 0.8rem;
color: white;
font-weight: 600;
}
.btn-follow-small {
padding: 0.35rem 0.75rem;
font-size: 0.7rem;
border-radius: 20px;
border: 1px solid var(--accent);
background: transparent;
color: var(--accent);
cursor: pointer;
font-weight: 600;
transition: all 0.2s;
margin-left: auto;
}
.btn-follow-small:hover {
background: var(--accent);
color: white;
}
.btn-follow-small.following {
border-color: var(--accent-tertiary);
color: var(--accent-tertiary);
}
.btn-follow-small.following:hover {
background: rgba(42, 157, 143, 0.2);
}

/* ═══════════════════════════════════════════════════════════
   💬 MESSAGERIE
   ═══════════════════════════════════════════════════════════ */
.messages-modal {
position: fixed;
top: 0;
left: 0;
right: 0;
bottom: 0;
background: rgba(0,0,0,0.9);
z-index: 2500;
display: flex;
opacity: 0;
visibility: hidden;
transition: all 0.3s;
}
.messages-modal.open {
opacity: 1;
visibility: visible;
}
.messages-sidebar {
width: 280px;
background: var(--bg-card);
border-right: 1px solid var(--border);
display: flex;
flex-direction: column;
}
.messages-sidebar-header {
padding: 1rem;
border-bottom: 1px solid var(--border);
display: flex;
align-items: center;
justify-content: space-between;
}
.messages-sidebar-title {
font-size: 1rem;
font-weight: 600;
}
.messages-close {
background: none;
border: none;
color: var(--text-secondary);
font-size: 1.25rem;
cursor: pointer;
padding: 0.25rem;
}
.messages-close:hover { color: var(--text); }
.messages-list {
flex: 1;
overflow-y: auto;
}
.messages-empty {
padding: 2rem;
text-align: center;
color: var(--muted);
font-size: 0.85rem;
}
.conversation-item {
display: flex;
align-items: center;
gap: 0.75rem;
padding: 0.85rem 1rem;
cursor: pointer;
transition: background 0.2s;
border-bottom: 1px solid var(--border);
}
.conversation-item:hover {
background: var(--bg-elevated);
}
.conversation-item.active {
background: var(--bg-elevated);
border-left: 3px solid var(--accent);
}
.conversation-avatar {
width: 42px;
height: 42px;
border-radius: 50%;
background: linear-gradient(135deg, var(--accent), var(--accent-purple));
display: flex;
align-items: center;
justify-content: center;
font-size: 1rem;
color: white;
font-weight: 600;
flex-shrink: 0;
}
.conversation-info {
flex: 1;
min-width: 0;
}
.conversation-name {
font-size: 0.85rem;
font-weight: 500;
color: var(--text);
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
}
.conversation-preview {
font-size: 0.75rem;
color: var(--muted);
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
}
.conversation-meta {
display: flex;
flex-direction: column;
align-items: flex-end;
gap: 0.25rem;
}
.conversation-time {
font-size: 0.65rem;
color: var(--muted);
}
.conversation-unread {
width: 18px;
height: 18px;
background: var(--accent);
border-radius: 50%;
font-size: 0.6rem;
color: white;
display: flex;
align-items: center;
justify-content: center;
font-weight: 600;
}
.messages-main {
flex: 1;
display: flex;
flex-direction: column;
background: var(--bg);
}
.messages-main-empty {
flex: 1;
display: flex;
align-items: center;
justify-content: center;
color: var(--muted);
font-size: 0.9rem;
}
.chat-header {
padding: 1rem;
border-bottom: 1px solid var(--border);
display: flex;
align-items: center;
gap: 0.75rem;
background: var(--bg-card);
}
.chat-header-avatar {
width: 36px;
height: 36px;
border-radius: 50%;
background: linear-gradient(135deg, var(--accent-purple), var(--accent));
display: flex;
align-items: center;
justify-content: center;
font-size: 0.9rem;
color: white;
font-weight: 600;
}
.chat-header-name {
font-weight: 500;
}
.chat-messages {
flex: 1;
overflow-y: auto;
padding: 1rem;
display: flex;
flex-direction: column;
gap: 0.75rem;
}
.chat-message {
max-width: 70%;
padding: 0.65rem 0.9rem;
border-radius: 16px;
font-size: 0.85rem;
line-height: 1.4;
}
.chat-message.sent {
align-self: flex-end;
background: var(--accent);
color: white;
border-bottom-right-radius: 4px;
}
.chat-message.received {
align-self: flex-start;
background: var(--bg-elevated);
border: 1px solid var(--border);
border-bottom-left-radius: 4px;
}
.chat-message-time {
font-size: 0.6rem;
color: rgba(255,255,255,0.6);
margin-top: 0.25rem;
text-align: right;
}
.chat-message.received .chat-message-time {
color: var(--muted);
}
.chat-input-area {
padding: 1rem;
border-top: 1px solid var(--border);
background: var(--bg-card);
display: flex;
gap: 0.75rem;
}
.chat-input {
flex: 1;
background: var(--bg-elevated);
border: 1px solid var(--border);
border-radius: 20px;
padding: 0.65rem 1rem;
color: var(--text);
font-size: 0.85rem;
outline: none;
}
.chat-input:focus {
border-color: var(--accent);
}
.chat-send {
background: var(--accent);
border: none;
border-radius: 50%;
width: 40px;
height: 40px;
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
color: white;
font-size: 1rem;
transition: transform 0.2s;
}
.chat-send:hover {
transform: scale(1.05);
}
.chat-send:disabled {
opacity: 0.5;
cursor: not-allowed;
}
.btn-message {
padding: 0.5rem 0.75rem;
background: var(--bg-elevated);
border: 1px solid var(--border);
border-radius: 6px;
color: var(--text-secondary);
font-size: 0.75rem;
cursor: pointer;
transition: all 0.2s;
}
.btn-message:hover {
border-color: var(--accent-purple);
color: var(--text);
}
.messages-badge {
position: absolute;
top: -5px;
right: -5px;
background: var(--accent);
color: white;
font-size: 0.6rem;
padding: 0.15rem 0.4rem;
border-radius: 10px;
font-weight: 600;
}
@media (max-width: 700px) {
.messages-sidebar { width: 100%; }
.messages-main { display: none; }
.messages-modal.chat-open .messages-sidebar { display: none; }
.messages-modal.chat-open .messages-main { display: flex; }
.chat-back {
    display: block;
    background: none;
    border: none;
    color: var(--text-secondary);
    font-size: 1.25rem;
    cursor: pointer;
    margin-right: 0.5rem;
}
}
@media (min-width: 701px) {
.chat-back { display: none; }
}

/* ═══════════════════════════════════════════════════════════
   🔔 NOTIFICATIONS
   ═══════════════════════════════════════════════════════════ */
.notif-btn {
position: relative;
}
.notif-badge {
position: absolute;
top: -5px;
right: -5px;
background: #e74c3c;
color: white;
font-size: 0.6rem;
padding: 0.15rem 0.4rem;
border-radius: 10px;
font-weight: 600;
min-width: 16px;
text-align: center;
}
.notif-dropdown {
position: absolute;
top: calc(100% + 8px);
right: 0;
width: 320px;
max-height: 400px;
background: var(--bg-card);
border: 1px solid var(--border);
border-radius: 12px;
box-shadow: 0 10px 40px rgba(0,0,0,0.4);
z-index: 2000;
display: none;
overflow: hidden;
}
.notif-dropdown.open { display: block; }
.notif-header {
padding: 0.75rem 1rem;
border-bottom: 1px solid var(--border);
display: flex;
justify-content: space-between;
align-items: center;
}
.notif-title {
font-weight: 600;
font-size: 0.9rem;
}
.notif-mark-read {
background: none;
border: none;
color: var(--accent);
font-size: 0.75rem;
cursor: pointer;
}
.notif-mark-read:hover { text-decoration: underline; }
.notif-list {
max-height: 350px;
overflow-y: auto;
}
.notif-empty {
padding: 2rem;
text-align: center;
color: var(--muted);
font-size: 0.85rem;
}
.notif-item {
display: flex;
gap: 0.75rem;
padding: 0.75rem 1rem;
cursor: pointer;
transition: background 0.2s;
border-bottom: 1px solid var(--border);
}
.notif-item:hover { background: var(--bg-elevated); }
.notif-item.unread { background: rgba(230, 126, 34, 0.1); }
.notif-avatar {
width: 36px;
height: 36px;
border-radius: 50%;
background: linear-gradient(135deg, var(--accent), var(--accent-purple));
display: flex;
align-items: center;
justify-content: center;
font-size: 0.85rem;
color: white;
font-weight: 600;
flex-shrink: 0;
}
.notif-content {
flex: 1;
min-width: 0;
}
.notif-text {
font-size: 0.8rem;
color: var(--text);
line-height: 1.4;
}
.notif-text strong { color: var(--accent); }
.notif-time {
font-size: 0.65rem;
color: var(--muted);
margin-top: 0.2rem;
}
.notif-icon {
font-size: 1rem;
flex-shrink: 0;
}

/* Discover Users Grid */
.discover-header {
text-align: center;
margin-bottom: 1.5rem;
padding-bottom: 1rem;
border-bottom: 1px solid var(--border);
}
.discover-header h3 {
font-size: 1.1rem;
color: var(--text);
margin-bottom: 0.5rem;
}
.discover-header p {
font-size: 0.85rem;
color: var(--muted);
}
.discover-grid {
display: grid;
gap: 0.75rem;
}
.discover-card {
display: flex;
align-items: center;
gap: 1rem;
padding: 1rem;
background: var(--bg-card);
border: 1px solid var(--border);
border-radius: 12px;
transition: all 0.2s;
}
.discover-card:hover {
border-color: var(--accent);
transform: translateX(4px);
}
.discover-avatar {
width: 48px;
height: 48px;
border-radius: 50%;
background: linear-gradient(135deg, var(--accent), var(--accent-purple));
display: flex;
align-items: center;
justify-content: center;
font-size: 1.25rem;
font-weight: 600;
color: white;
cursor: pointer;
flex-shrink: 0;
}
.discover-info {
flex: 1;
cursor: pointer;
}
.discover-name {
font-weight: 600;
color: var(--text);
font-size: 1rem;
}
.discover-stats {
font-size: 0.8rem;
color: var(--muted);
margin-top: 0.2rem;
}

/* Feed d'activité */
.activity-feed {
display: flex;
flex-direction: column;
gap: 0.5rem;
}
.activity-filters {
display: flex;
gap: 0.5rem;
margin-bottom: 1rem;
flex-wrap: wrap;
}
.activity-filter {
padding: 0.4rem 0.8rem;
background: var(--bg-card);
border: 1px solid var(--border);
border-radius: 20px;
font-size: 0.8rem;
color: var(--text-secondary);
cursor: pointer;
transition: all 0.2s;
display: flex;
align-items: center;
gap: 0.4rem;
}
.activity-filter:hover {
border-color: var(--accent);
color: var(--text);
}
.activity-filter.active {
background: var(--accent);
color: white;
border-color: var(--accent);
}
.activity-filter .filter-count {
background: rgba(255,255,255,0.2);
padding: 0.1rem 0.4rem;
border-radius: 10px;
font-size: 0.7rem;
}
.activity-filter.active .filter-count {
background: rgba(255,255,255,0.3);
}
.activity-item {
display: flex;
align-items: flex-start;
gap: 0.75rem;
padding: 0.75rem 1rem;
background: var(--bg-card);
border: 1px solid var(--border);
border-radius: 12px;
cursor: pointer;
transition: all 0.2s;
}
.activity-item:hover {
border-color: var(--accent);
background: var(--bg-elevated);
}
.activity-item.highlight {
border-color: var(--accent);
background: linear-gradient(135deg, rgba(255,69,58,0.1), transparent);
animation: activityHighlight 2s ease;
}
@keyframes activityHighlight {
0% { transform: translateX(-10px); opacity: 0; }
100% { transform: translateX(0); opacity: 1; }
}
.activity-avatar {
width: 36px;
height: 36px;
border-radius: 50%;
background: linear-gradient(135deg, #ff6b6b, #ee5a5a);
display: flex;
align-items: center;
justify-content: center;
font-size: 0.9rem;
font-weight: 600;
color: white;
cursor: pointer;
flex-shrink: 0;
}
.activity-avatar.comment { background: linear-gradient(135deg, #5ac8fa, #007aff); }
.activity-avatar.follow { background: linear-gradient(135deg, #bf5af2, #9b59b6); }
.activity-avatar.share { background: linear-gradient(135deg, #30d158, #27ae60); }
.activity-content {
flex: 1;
min-width: 0;
}
.activity-text {
font-size: 0.9rem;
color: var(--text);
line-height: 1.4;
}
.activity-text strong {
color: var(--accent);
cursor: pointer;
}
.activity-text strong:hover {
text-decoration: underline;
}
.activity-snippet {
font-size: 0.8rem;
color: var(--muted);
font-style: italic;
margin-top: 0.3rem;
line-height: 1.3;
overflow: hidden;
text-overflow: ellipsis;
white-space: nowrap;
}
.activity-comment-preview {
font-size: 0.8rem;
color: var(--text);
margin-top: 0.3rem;
padding: 0.5rem;
background: var(--bg-elevated);
border-radius: 8px;
border-left: 2px solid var(--accent);
}
.activity-time {
font-size: 0.75rem;
color: var(--muted);
margin-top: 0.25rem;
}
.activity-icon {
font-size: 1.2rem;
flex-shrink: 0;
}
.activity-icon.like { animation: heartPulse 1s ease infinite; }
@keyframes heartPulse {
0%, 100% { transform: scale(1); }
50% { transform: scale(1.1); }
}
.activity-section-title {
font-size: 0.75rem;
color: var(--muted);
text-transform: uppercase;
letter-spacing: 1px;
padding: 0.5rem 0;
margin-top: 0.5rem;
border-top: 1px solid var(--border);
}
.activity-section-title:first-child {
border-top: none;
margin-top: 0;
}

.btn-close-profile {
background: var(--bg-elevated);
color: var(--text);
border: 1px solid var(--border) !important;
}
.friends-list {
margin-top: 1.5rem;
border-top: 1px solid var(--border);
padding-top: 1rem;
}
.friends-list h4 {
font-size: 0.85rem;
color: var(--muted);
margin-bottom: 0.75rem;
}
.friend-item {
display: flex;
align-items: center;
gap: 0.75rem;
padding: 0.5rem 0;
cursor: pointer;
}
.friend-item:hover {
background: var(--bg-elevated);
margin: 0 -1rem;
padding: 0.5rem 1rem;
border-radius: 8px;
}
.friend-avatar {
width: 32px;
height: 32px;
border-radius: 50%;
background: var(--accent-purple);
display: flex;
align-items: center;
justify-content: center;
font-size: 0.8rem;
color: white;
}
.extrait-time {
font-size: 0.75rem;
color: var(--muted);
}
.extrait-text {
font-family: 'Playfair Display', serif;
font-size: 1.1rem;
font-style: italic;
color: var(--text);
line-height: 1.7;
padding: 1rem;
background: var(--bg);
border-left: 3px solid var(--accent-tertiary);
border-radius: 0 8px 8px 0;
margin-bottom: 0.75rem;
}
.extrait-source {
font-size: 0.8rem;
color: var(--text-secondary);
margin-bottom: 0.5rem;
}
.extrait-source strong {
color: var(--text);
}
.extrait-commentary {
font-size: 0.9rem;
color: var(--text-secondary);
line-height: 1.5;
margin-top: 0.75rem;
padding-top: 0.75rem;
border-top: 1px solid var(--border);
}
.extrait-actions {
display: flex;
gap: 1.5rem;
margin-top: 1rem;
padding-top: 0.75rem;
border-top: 1px solid var(--border);
}
.extrait-action {
display: flex;
align-items: center;
gap: 0.4rem;
background: none;
border: none;
color: var(--muted);
font-size: 0.85rem;
cursor: pointer;
transition: all 0.2s;
padding: 0.3rem 0;
}
.extrait-action:hover { color: var(--text); }
.extrait-action.liked { color: var(--accent); }
.extrait-action .icon { font-size: 1.1rem; }

/* Empty social feed */
.social-empty {
text-align: center;
padding: 3rem 1rem;
color: var(--muted);
}
.social-empty-icon {
font-size: 3rem;
margin-bottom: 1rem;
opacity: 0.3;
}
.social-empty-title {
font-size: 1rem;
color: var(--text);
margin-bottom: 0.5rem;
}
.social-empty-text {
font-size: 0.85rem;
}

/* Profile section in sidebar */
.profile-section {
background: var(--bg-elevated);
border-radius: 12px;
padding: 1rem;
margin-bottom: 1rem;
}
.profile-header {
display: flex;
align-items: center;
gap: 0.75rem;
margin-bottom: 0.75rem;
}
.profile-avatar {
width: 40px;
height: 40px;
border-radius: 50%;
background: linear-gradient(135deg, var(--accent), var(--accent-purple));
display: flex;
align-items: center;
justify-content: center;
font-size: 1rem;
}
.profile-name {
font-weight: 600;
font-size: 0.9rem;
color: var(--text);
}
.profile-stats {
display: flex;
gap: 1rem;
font-size: 0.75rem;
color: var(--muted);
}
.profile-stat strong {
color: var(--text);
}
.login-prompt {
text-align: center;
padding: 0.75rem;
}
.login-prompt-text {
font-size: 0.8rem;
color: var(--muted);
margin-bottom: 0.75rem;
}
.login-prompt-btn {
background: var(--accent);
border: none;
color: white;
padding: 0.5rem 1rem;
border-radius: 6px;
font-size: 0.8rem;
cursor: pointer;
transition: all 0.2s;
}
.login-prompt-btn:hover { background: #ff4757; }

/* ═══════════════════════════════════════════════════════════
   📱 RESPONSIVE MOBILE (iPhone & petits écrans)
   Safari-compatible avec !important pour forcer les styles
   ═══════════════════════════════════════════════════════════ */

/* Tablettes et petits écrans */
@media screen and (max-width: 768px) {
    /* Le drawer est géré par mobile.css - NE PAS LE CACHER ICI */
    
    /* Header mobile */
    header {
        left: 0 !important;
        right: 0 !important;
    }
    .header-inner {
        padding: 0.5rem 0.75rem;
        gap: 0.5rem;
        -webkit-box-pack: justify;
        justify-content: space-between;
    }
    .header-title {
        font-size: 0.65rem;
        letter-spacing: 0.05em;
    }
    .search-container {
        min-width: 100px;
        max-width: none;
        -webkit-box-flex: 1;
        flex: 1;
        margin: 0 0.5rem;
    }
    .search-input {
        padding: 0.5rem 0.75rem 0.5rem 2rem;
        font-size: 16px; /* 16px empêche le zoom auto sur iOS */
    }
    .header-btn {
        padding: 0.35rem 0.6rem;
        font-size: 0.65rem;
        -webkit-tap-highlight-color: transparent;
    }
    
    /* Main content - FORCER le centrage */
    main {
        margin-left: 0 !important;
        margin-right: 0 !important;
        padding: 4.5rem 0.75rem 5rem !important;
        max-width: 100% !important;
    }
    
    /* Cards */
    .card {
        padding: 1.25rem;
        border-radius: 12px;
    }
    .card-quote {
        font-size: 1.1rem;
        line-height: 1.6;
    }
    .card-meta {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
    }
    
    /* Modals */
    .auth-modal-content,
    .share-modal-content,
    .detail-modal-content {
        width: 95%;
        max-width: none;
        margin: 1rem;
        padding: 1.25rem;
        border-radius: 16px;
    }
    
    /* Social feed tabs */
    .exploration-tabs {
        padding: 0 0.5rem;
        gap: 0.25rem;
    }
    .exploration-tab {
        padding: 0.4rem 0.6rem;
        font-size: 0.7rem;
    }
    
    /* Feed items */
    .feed-card {
        padding: 1rem;
    }
    .feed-quote {
        font-size: 1rem;
    }
    
    /* Messages modal */
    .messages-modal-content {
        width: 100%;
        height: 100%;
        max-width: none;
        max-height: none;
        border-radius: 0;
    }
    
    /* Notifications dropdown */
    .notif-dropdown {
        width: 100vw;
        max-width: 100vw;
        right: -1rem;
        border-radius: 0 0 12px 12px;
    }
    
    /* User dropdown */
    .user-dropdown {
        width: 200px;
        right: 0;
    }
}

/* iPhone et très petits écrans */
@media screen and (max-width: 480px) {
    /* Le drawer est géré par mobile.css */
    
    /* Header ultra compact */
    header {
        left: 0 !important;
    }
    .header-inner {
        padding: 0.4rem 0.5rem;
        gap: 0.35rem;
    }
    .header-title {
        display: none !important; /* Cacher le titre sur très petits écrans */
    }
    .search-container {
        margin: 0 0.25rem;
        min-width: 80px;
    }
    .search-input {
        padding: 0.45rem 0.6rem 0.45rem 1.8rem;
        font-size: 16px; /* 16px empêche le zoom auto sur iOS */
        border-radius: 20px;
    }
    .search-icon {
        left: 0.6rem;
        font-size: 0.8rem;
    }
    .header-btn {
        padding: 0.3rem 0.5rem;
        font-size: 0.6rem;
        min-height: 36px;
        min-width: 36px;
        display: -webkit-box;
        display: flex;
        -webkit-box-align: center;
        align-items: center;
        -webkit-box-pack: center;
        justify-content: center;
    }
    /* Cacher certains boutons header sur mobile */
    .lang-selector {
        display: none !important;
    }
    
    /* Main content */
    main {
        margin-left: 0 !important;
        padding: 4rem 0.5rem 5rem !important;
    }
    
    /* Cards encore plus compactes */
    .card {
        padding: 1rem;
        border-radius: 10px;
    }
    .card-quote {
        font-size: 1rem;
        line-height: 1.5;
    }
    .card-source {
        font-size: 0.75rem;
    }
    .card-actions {
        display: -webkit-box;
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
    }
    .card-action {
        padding: 0.4rem 0.6rem;
        font-size: 0.7rem;
        min-height: 36px;
        -webkit-tap-highlight-color: transparent;
    }
    
    /* Bouton flottant d'action */
    .float-btn {
        bottom: 1rem;
        right: 1rem;
        width: 50px;
        height: 50px;
    }
    
    /* Auth modal */
    .auth-modal-content {
        padding: 1rem;
    }
    .auth-modal-content h2 {
        font-size: 1.25rem;
    }
    .auth-input {
        padding: 0.7rem;
        font-size: 0.9rem;
    }
    .auth-btn {
        padding: 0.75rem;
        font-size: 0.9rem;
    }
    
    /* Feed tabs scroll horizontal */
    .exploration-container {
        padding: 0;
    }
    .exploration-tabs {
        padding: 0 0.25rem;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
        -ms-overflow-style: none;
    }
    .exploration-tabs::-webkit-scrollbar {
        display: none;
    }
    .exploration-tab {
        padding: 0.35rem 0.5rem;
        font-size: 0.65rem;
        white-space: nowrap;
        flex-shrink: 0;
    }
    
    /* Detail modal full screen */
    .detail-modal-content {
        width: 100%;
        height: 100%;
        max-height: 100%;
        border-radius: 0;
        margin: 0;
    }
    
    /* Share modal */
    .share-modal-content {
        padding: 1rem;
    }
    .share-options {
        grid-template-columns: repeat(3, 1fr);
        gap: 0.5rem;
    }
    .share-option {
        padding: 0.75rem 0.5rem;
        font-size: 0.65rem;
    }
    .share-option-icon {
        font-size: 1.25rem;
    }
    
    /* Reco banner */
    .reco-banner {
        padding: 1rem;
        margin: 0 0.5rem;
    }
    .reco-text {
        font-size: 0.8rem;
    }
    
    /* Ambiance intro */
    .ambiance-intro {
        padding: 1rem;
        margin: 0.5rem;
        border-radius: 12px;
    }
    .ambiance-intro h2 {
        font-size: 1.2rem;
    }
    .ambiance-intro p {
        font-size: 0.8rem;
    }
    
    /* Achievement popup */
    .achievement-popup {
        bottom: 1rem;
        right: 0.5rem;
        left: 0.5rem;
        padding: 1rem;
    }
    .achievement-icon {
        font-size: 2rem;
    }
    .achievement-name {
        font-size: 1rem;
    }
    
    /* Toast notifications */
    .toast {
        left: 0.5rem;
        right: 0.5rem;
        bottom: 1rem;
        max-width: none;
    }
    
    /* Comments section */
    .comments-section {
        padding: 0.75rem;
    }
    .comment-input {
        font-size: 0.85rem;
    }
    
    /* Profile page */
    .profile-page-header {
        padding: 1rem;
        flex-direction: column;
        text-align: center;
    }
    .profile-page-avatar {
        width: 60px;
        height: 60px;
        font-size: 1.5rem;
    }
    .profile-page-stats {
        justify-content: center;
    }
}

/* Fix pour le safe area sur iPhone (notch) */
@supports (padding: max(0px)) {
    header {
        padding-top: max(0px, env(safe-area-inset-top));
    }
    main {
        padding-bottom: max(5rem, calc(5rem + env(safe-area-inset-bottom)));
    }
    .float-btn {
        bottom: max(1rem, calc(1rem + env(safe-area-inset-bottom)));
    }
    .achievement-popup {
        bottom: max(2rem, calc(2rem + env(safe-area-inset-bottom)));
    }
    .toast {
        bottom: max(1rem, calc(1rem + env(safe-area-inset-bottom)));
    }
}

/* Amélioration du touch sur mobile */
@media (hover: none) and (pointer: coarse) {
    /* Zones de tap plus grandes */
    .card-action,
    .header-btn,
    .exploration-tab,
    .auth-btn {
        min-height: 44px;
        min-width: 44px;
    }
    
    /* Désactiver les effets hover qui ne marchent pas bien sur touch */
    .card:hover {
        transform: none;
    }
    .card-action:hover {
        transform: none;
    }
    
    /* Feedback visuel pour tap */
    .card-action:active,
    .header-btn:active,
    .auth-btn:active {
        opacity: 0.7;
        transform: scale(0.98);
    }
}

/* ═══════════════════════════════════════════════════════════
   📱 MOBILE RESPONSIVE - SAFARI iOS & ANDROID
   Version complète et robuste
   Note: Le drawer mobile est géré dans mobile.css
   ═══════════════════════════════════════════════════════════ */

/* ====== TABLETTES ET MOBILE (< 900px) ====== */
@media screen and (max-width: 900px) {
    /* SIDEBAR devient DRAWER - géré dans mobile.css, ne pas masquer ici */
    /* On laisse mobile.css gérer le drawer */
    
    /* Body - empêcher le scroll horizontal */
    html, body {
        overflow-x: hidden !important;
        width: 100% !important;
        max-width: 100vw !important;
        position: relative !important;
    }
    
    /* HEADER - Pleine largeur */
    header {
        position: fixed !important;
        left: 0 !important;
        right: 0 !important;
        top: 0 !important;
        width: 100% !important;
        z-index: 1000 !important;
    }
    
    .header-inner {
        padding: 0.5rem 0.75rem !important;
        gap: 0.5rem !important;
        -webkit-box-pack: justify !important;
        justify-content: space-between !important;
    }
    
    .header-title {
        font-size: 0.65rem !important;
        display: block !important;
    }
    
    /* Search */
    .search-container {
        -webkit-box-flex: 1 !important;
        flex: 1 !important;
        min-width: 100px !important;
        max-width: none !important;
        margin: 0 0.5rem !important;
    }
    
    .search-input {
        font-size: 16px !important; /* Empêche zoom iOS */
        padding: 0.5rem 0.75rem 0.5rem 2rem !important;
        border-radius: 20px !important;
    }
    
    /* Header actions */
    .header-actions {
        display: -webkit-box !important;
        display: -webkit-flex !important;
        display: flex !important;
        -webkit-box-align: center !important;
        -webkit-align-items: center !important;
        align-items: center !important;
        gap: 0.25rem !important;
        -webkit-flex-shrink: 0 !important;
        flex-shrink: 0 !important;
    }
    
    .header-btn {
        padding: 0.35rem 0.5rem !important;
        font-size: 0.85rem !important;
        min-height: 36px !important;
        min-width: 36px !important;
        display: -webkit-box !important;
        display: -webkit-flex !important;
        display: flex !important;
        -webkit-box-align: center !important;
        -webkit-align-items: center !important;
        align-items: center !important;
        -webkit-box-pack: center !important;
        -webkit-justify-content: center !important;
        justify-content: center !important;
    }
    
    /* Cacher sélecteur de langue */
    .lang-selector {
        display: none !important;
    }
    
    /* MAIN CONTENT */
    main {
        margin-left: 0 !important;
        margin-right: 0 !important;
        width: 100% !important;
        max-width: 100% !important;
        padding: 4.5rem 1rem 5rem 1rem !important;
        min-height: 100vh !important;
        -webkit-box-sizing: border-box !important;
        box-sizing: border-box !important;
    }
    
    /* Cards */
    .card {
        padding: 1.25rem !important;
        margin-bottom: 1rem !important;
        border-radius: 12px !important;
        max-width: 100% !important;
    }
    
    .card-quote {
        font-size: 1.05rem !important;
        line-height: 1.6 !important;
    }
    
    .card-actions {
        display: -webkit-box !important;
        display: -webkit-flex !important;
        display: flex !important;
        -webkit-flex-wrap: wrap !important;
        flex-wrap: wrap !important;
        gap: 0.5rem !important;
    }
    
    .card-action {
        padding: 0.5rem 0.75rem !important;
        font-size: 0.75rem !important;
        min-height: 40px !important;
        -webkit-tap-highlight-color: transparent !important;
    }
    
    /* RECO BANNER */
    .reco-banner {
        margin: 0 !important;
        padding: 1rem !important;
        border-radius: 12px !important;
        max-width: 100% !important;
    }
    
    /* EXPLORATION TABS */
    .exploration-container {
        padding: 0 !important;
    }
    
    .exploration-tabs {
        display: -webkit-box !important;
        display: -webkit-flex !important;
        display: flex !important;
        overflow-x: auto !important;
        -webkit-overflow-scrolling: touch !important;
        scrollbar-width: none !important;
        padding: 0 0.5rem !important;
        gap: 0.5rem !important;
    }
    
    .exploration-tabs::-webkit-scrollbar {
        display: none !important;
    }
    
    .exploration-tab {
        -webkit-flex-shrink: 0 !important;
        flex-shrink: 0 !important;
        white-space: nowrap !important;
        padding: 0.5rem 0.75rem !important;
        font-size: 0.75rem !important;
    }
    
    /* MODALS */
    .auth-modal-content,
    .detail-modal-content,
    .share-modal-content,
    .favorites-modal-content {
        width: 95% !important;
        max-width: 400px !important;
        max-height: 90vh !important;
        margin: auto !important;
        border-radius: 16px !important;
        overflow-y: auto !important;
        -webkit-overflow-scrolling: touch !important;
    }
    
    /* DROPDOWNS - Style bottom sheet mobile */
    .user-dropdown,
    .notif-dropdown {
        position: fixed !important;
        top: auto !important;
        bottom: 0 !important;
        left: 0 !important;
        right: 0 !important;
        width: 100% !important;
        max-width: 100% !important;
        max-height: 70vh !important;
        border-radius: 20px 20px 0 0 !important;
        overflow-y: auto !important;
        -webkit-overflow-scrolling: touch !important;
        z-index: 2000 !important;
    }
    
    .user-dropdown-item {
        padding: 1rem 1.25rem !important;
        min-height: 50px !important;
        font-size: 1rem !important;
    }
    
    /* FLOATIN BUTTON */
    .float-btn {
        bottom: 1rem !important;
        right: 1rem !important;
        width: 56px !important;
        height: 56px !important;
        z-index: 900 !important;
    }
}

/* ====== SMARTPHONES (< 480px) ====== */
@media screen and (max-width: 480px) {
    /* Le drawer est géré par mobile.css */
    
    /* Header ultra compact */
    .header-inner {
        padding: 0.4rem 0.5rem !important;
        gap: 0.3rem !important;
    }
    
    .header-title {
        display: none !important; /* Masquer titre sur petit écran */
    }
    
    .search-container {
        margin: 0 0.25rem !important;
    }
    
    .search-input {
        padding: 0.4rem 0.5rem 0.4rem 1.75rem !important;
    }
    
    .header-btn {
        padding: 0.3rem !important;
        font-size: 0.9rem !important;
        min-width: 34px !important;
        min-height: 34px !important;
    }
    
    /* Main */
    main {
        padding: 4rem 0.5rem 5rem 0.5rem !important;
    }
    
    /* Cards compactes */
    .card {
        padding: 1rem !important;
        border-radius: 10px !important;
    }
    
    .card-quote {
        font-size: 0.95rem !important;
        line-height: 1.55 !important;
    }
    
    .card-source {
        font-size: 0.7rem !important;
    }
    
    .card-action {
        padding: 0.4rem 0.6rem !important;
        font-size: 0.7rem !important;
        min-height: 36px !important;
    }
    
    /* Auth modal */
    .auth-modal-content {
        width: 100% !important;
        max-width: 100% !important;
        height: 100% !important;
        max-height: 100% !important;
        border-radius: 0 !important;
    }
    
    .auth-input {
        font-size: 16px !important; /* Empêche zoom iOS */
        padding: 0.75rem !important;
    }
    
    .auth-btn {
        padding: 0.85rem !important;
        font-size: 1rem !important;
        min-height: 48px !important;
    }
    
    /* Detail modal plein écran */
    .detail-modal-content {
        width: 100% !important;
        height: 100% !important;
        max-height: 100% !important;
        border-radius: 0 !important;
    }
    
    /* Share options */
    .share-options {
        grid-template-columns: repeat(3, 1fr) !important;
        gap: 0.5rem !important;
    }
    
    .share-option {
        padding: 0.6rem 0.4rem !important;
        font-size: 0.6rem !important;
    }
    
    /* Toast */
    .toast {
        left: 0.5rem !important;
        right: 0.5rem !important;
        bottom: 1.5rem !important;
        max-width: none !important;
    }
    
    /* Achievement popup */
    .achievement-popup {
        left: 0.5rem !important;
        right: 0.5rem !important;
        bottom: 1.5rem !important;
    }
    
    /* Profile page */
    .profile-page-header {
        -webkit-flex-direction: column !important;
        flex-direction: column !important;
        text-align: center !important;
        padding: 1rem !important;
    }
    
    .profile-page-avatar {
        width: 60px !important;
        height: 60px !important;
    }
}

/* ====== TRÈS PETITS ÉCRANS (< 375px) - iPhone SE, etc ====== */
@media screen and (max-width: 375px) {
    .header-inner {
        padding: 0.35rem 0.4rem !important;
    }
    
    .search-input {
        min-width: 60px !important;
        padding: 0.35rem 0.4rem 0.35rem 1.5rem !important;
        font-size: 14px !important;
    }
    
    .header-btn {
        min-width: 30px !important;
        min-height: 30px !important;
        font-size: 0.8rem !important;
    }
    
    main {
        padding: 3.75rem 0.4rem 4.5rem 0.4rem !important;
    }
    
    .card {
        padding: 0.85rem !important;
    }
    
    .card-quote {
        font-size: 0.9rem !important;
    }
    
    .card-action {
        padding: 0.35rem 0.5rem !important;
        min-height: 32px !important;
    }
}

/* ====== SAFE AREA iOS (Notch iPhone X+) ====== */
@supports (padding-top: env(safe-area-inset-top)) {
    @media screen and (max-width: 900px) {
        header {
            padding-top: env(safe-area-inset-top) !important;
        }
        
        main {
            padding-bottom: calc(5rem + env(safe-area-inset-bottom)) !important;
        }
        
        .float-btn {
            bottom: calc(1rem + env(safe-area-inset-bottom)) !important;
        }
        
        .toast,
        .achievement-popup {
            bottom: calc(1.5rem + env(safe-area-inset-bottom)) !important;
        }
        
        .user-dropdown,
        .notif-dropdown {
            padding-bottom: env(safe-area-inset-bottom) !important;
        }
    }
}

/* ====== TOUCH DEVICES ====== */
@media (hover: none) and (pointer: coarse) {
    /* Zones de tap Apple-compliant (44x44 minimum) */
    .card-action,
    .header-btn,
    .exploration-tab,
    .auth-btn,
    .user-dropdown-item {
        min-height: 44px !important;
    }
    
    /* Désactiver hover effects */
    .card:hover,
    .card-action:hover,
    .header-btn:hover {
        transform: none !important;
        -webkit-transform: none !important;
    }
    
    /* Touch feedback */
    .card-action:active,
    .header-btn:active,
    .auth-btn:active,
    .exploration-tab:active {
        opacity: 0.7 !important;
        transform: scale(0.97) !important;
        -webkit-transform: scale(0.97) !important;
    }
    
    /* Smooth scrolling */
    .exploration-tabs,
    .favorites-section,
    .user-dropdown,
    .notif-dropdown,
    main {
        -webkit-overflow-scrolling: touch !important;
    }
    
    /* Empêcher sélection accidentelle */
    .card-action,
    .header-btn,
    .exploration-tab {
        -webkit-user-select: none !important;
        user-select: none !important;
        -webkit-touch-callout: none !important;
    }
}

/* ====== ORIENTATION PAYSAGE MOBILE ====== */
@media screen and (max-width: 900px) and (orientation: landscape) {
    header {
        padding-top: 0 !important;
    }
    
    main {
        padding-top: 3.5rem !important;
        padding-bottom: 3rem !important;
    }
    
    .auth-modal-content,
    .detail-modal-content {
        max-height: 95vh !important;
    }
    
    .user-dropdown,
    .notif-dropdown {
        max-height: 80vh !important;
    }
}

/* ====== FORCE REPAINT SAFARI (Bug fix) ====== */
@media screen and (max-width: 900px) {
    .stats-panel {
        -webkit-backface-visibility: hidden !important;
        backface-visibility: hidden !important;
        -webkit-perspective: 1000 !important;
        perspective: 1000 !important;
    }
}

/* ═══════════════════════════════════════════════════════════════════════════
   💬 COMMENTAIRES INLINE - Directement sous les cartes
   ═══════════════════════════════════════════════════════════════════════════ */

.inline-comment-box {
    max-height: 0;
    overflow: hidden;
    opacity: 0;
    transition: all 0.3s ease;
    background: var(--bg-elevated);
    border-top: 1px solid var(--border);
    margin-top: -1px;
}

.inline-comment-box.open {
    max-height: 300px;
    opacity: 1;
    padding: 0.75rem 1rem;
}

.inline-comments-list {
    max-height: 150px;
    overflow-y: auto;
    margin-bottom: 0.5rem;
}

.inline-comment-item {
    display: flex;
    align-items: flex-start;
    gap: 0.5rem;
    padding: 0.4rem 0;
    border-bottom: 1px dotted var(--border);
    animation: fadeInUp 0.2s ease;
}

.inline-comment-item:last-child {
    border-bottom: none;
}

.inline-comment-item.new {
    background: rgba(230, 57, 70, 0.1);
    border-radius: 4px;
    padding-left: 0.5rem;
    margin-left: -0.5rem;
}

.inline-comment-avatar {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: var(--accent);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.7rem;
    font-weight: bold;
    flex-shrink: 0;
}

.inline-comment-content {
    font-size: 0.8rem;
    color: var(--text-secondary);
    line-height: 1.4;
}

.inline-comment-content strong {
    color: var(--text);
    font-weight: 600;
    margin-right: 0.3rem;
}

.inline-comment-input-wrapper {
    display: flex;
    gap: 0.5rem;
    align-items: center;
}

.inline-comment-input {
    flex: 1;
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 0.5rem 1rem;
    font-size: 0.85rem;
    color: var(--text);
    outline: none;
    transition: border-color 0.2s ease;
}

.inline-comment-input:focus {
    border-color: var(--accent);
}

.inline-comment-input::placeholder {
    color: var(--muted);
}

.inline-comment-send {
    width: 36px;
    height: 36px;
    border: none;
    background: var(--accent);
    color: white;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
    transition: all 0.2s ease;
}

.inline-comment-send:hover {
    transform: scale(1.1);
    background: var(--accent-secondary);
}

.inline-comment-send:active {
    transform: scale(0.95);
}

/* Animation */
@keyframes fadeInUp {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

/* ═══════════════════════════════════════════════════════════════════════════
   📤 SHARE MODAL AMÉLIORÉ
   ═══════════════════════════════════════════════════════════════════════════ */

.share-text-selectable {
    user-select: text;
    -webkit-user-select: text;
    cursor: text;
    line-height: 1.7;
}

.share-text-selectable::selection {
    background: var(--accent);
    color: white;
}

.share-char-count {
    font-size: 0.75rem;
    text-align: right;
    margin-top: 0.5rem;
    color: var(--muted);
}

#sharePreviewText {
    max-height: 250px;
    overflow-y: auto;
    padding: 1rem;
    background: var(--bg-card);
    border-radius: 8px;
    border: 1px solid var(--border);
}

.share-preview {
    position: relative;
}

.btn-reset-share {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    background: var(--accent-tertiary);
    color: white;
    border: none;
    padding: 0.3rem 0.6rem;
    font-size: 0.7rem;
    border-radius: 4px;
    cursor: pointer;
    opacity: 0.8;
}

.btn-reset-share:hover {
    opacity: 1;
}

/* ═══════════════════════════════════════════════════════════════════════════
   📖 VOIR PLUS - Chargement depuis Wikisource
   ═══════════════════════════════════════════════════════════════════════════ */

.btn-voir-plus {
    display: inline-block;
    margin: 0.5rem 0;
    padding: 0.4rem 0.8rem;
    background: transparent;
    border: 1px dashed var(--accent-tertiary);
    color: var(--accent-tertiary);
    font-size: 0.75rem;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-voir-plus:hover {
    background: var(--accent-tertiary);
    color: white;
    border-style: solid;
}

.full-text-loaded {
    white-space: pre-line;
    line-height: 1.7;
    max-height: 400px;
    overflow-y: auto;
    padding: 0.75rem;
    background: var(--bg);
    border-radius: 8px;
    border: 1px solid var(--border);
    font-size: 0.9rem;
}

.extrait-source .source-link {
    margin-left: 0.5rem;
    color: var(--accent-tertiary);
    text-decoration: none;
    font-size: 0.8rem;
}

.extrait-source .source-link:hover {
    text-decoration: underline;
}

/* ═══════════════════════════════════════════════════════════════════════════
   👤 PROFIL SIDEBAR - Styles desktop
   ═══════════════════════════════════════════════════════════════════════════ */

/* Header profil avec avatar */
.profile-header-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
    padding: 1rem;
    background: var(--bg-elevated);
    border-radius: 12px;
    border: 1px solid var(--border);
    margin-bottom: 0.75rem;
}

.profile-avatar-large {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent), var(--accent-purple, #9b5de5));
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.8rem;
    color: white;
    border: 2px solid var(--border);
}

.profile-name-large {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text);
}

/* Stats row */
.profile-stats-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0.5rem;
    margin-bottom: 0.75rem;
}

.profile-stat-btn {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 0.75rem 0.5rem;
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
}

.profile-stat-btn:hover {
    background: var(--bg-lighter);
    border-color: var(--accent);
}

.profile-stat-btn .stat-number {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--accent);
}

.profile-stat-btn .stat-label {
    font-size: 0.7rem;
    color: var(--muted);
    margin-top: 0.2rem;
}

/* Bouton déconnexion */
.drawer-logout-btn {
    display: block;
    width: 100%;
    padding: 0.75rem 1rem;
    background: transparent;
    border: 1px solid var(--border);
    border-radius: 8px;
    color: var(--muted);
    font-size: 0.85rem;
    cursor: pointer;
    transition: all 0.2s;
    text-align: center;
}

.drawer-logout-btn:hover {
    background: rgba(230, 57, 70, 0.1);
    border-color: var(--accent);
    color: var(--accent);
}

/* Section stats avec titre stylé */
.stats-section h3 {
    font-size: 0.75rem;
    font-weight: 600;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    color: var(--muted);
    margin-bottom: 0.75rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

/* Grand nombre stats */
.stats-section .big-number {
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--accent);
    line-height: 1;
    margin-bottom: 0.25rem;
}

.stats-section .big-number-label {
    font-size: 0.75rem;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Mini stats grid */
.stats-section .mini-stats {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0.5rem;
    margin-top: 0.75rem;
}

.stats-section .mini-stat {
    background: var(--bg-elevated);
    padding: 0.6rem;
    border-radius: 8px;
    border: 1px solid var(--border);
    text-align: center;
}

.stats-section .mini-stat-value {
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--text);
}

.stats-section .mini-stat-label {
    font-size: 0.65rem;
    color: var(--muted);
    margin-top: 0.15rem;
}